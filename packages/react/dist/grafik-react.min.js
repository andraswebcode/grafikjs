/*! For license information please see grafik-react.min.js.LICENSE.txt */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.grafikReact=n():t.grafikReact=n()}(window,(()=>(()=>{"use strict";var t={335:(t,n,r)=>{var e=r(41),o=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function a(t,n,r){var e,a={},c=null,p=null;for(e in void 0!==r&&(c=""+r),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(p=n.ref),n)i.call(n,e)&&!u.hasOwnProperty(e)&&(a[e]=n[e]);if(t&&t.defaultProps)for(e in n=t.defaultProps)void 0===a[e]&&(a[e]=n[e]);return{$$typeof:o,type:t,key:c,ref:p,props:a,_owner:s.current}}n.jsx=a,n.jsxs=a},304:(t,n)=>{var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator,y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d=Object.assign,g={};function v(t,n,r){this.props=t,this.context=n,this.refs=g,this.updater=r||y}function _(){}function m(t,n,r){this.props=t,this.context=n,this.refs=g,this.updater=r||y}v.prototype.isReactComponent={},v.prototype.setState=function(t,n){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},_.prototype=v.prototype;var b=m.prototype=new _;b.constructor=m,d(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,O={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function S(t,n,e){var o,i={},s=null,u=null;if(null!=n)for(o in void 0!==n.ref&&(u=n.ref),void 0!==n.key&&(s=""+n.key),n)x.call(n,o)&&!P.hasOwnProperty(o)&&(i[o]=n[o]);var a=arguments.length-2;if(1===a)i.children=e;else if(1<a){for(var c=Array(a),p=0;p<a;p++)c[p]=arguments[p+2];i.children=c}if(t&&t.defaultProps)for(o in a=t.defaultProps)void 0===i[o]&&(i[o]=a[o]);return{$$typeof:r,type:t,key:s,ref:u,props:i,_owner:O.current}}function j(t){return"object"==typeof t&&null!==t&&t.$$typeof===r}var C=/\/+/g;function A(t,n){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return n[t]}))}(""+t.key):n.toString(36)}function E(t,n,o,i,s){var u=typeof t;"undefined"!==u&&"boolean"!==u||(t=null);var a=!1;if(null===t)a=!0;else switch(u){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case r:case e:a=!0}}if(a)return s=s(a=t),t=""===i?"."+A(a,0):i,w(s)?(o="",null!=t&&(o=t.replace(C,"$&/")+"/"),E(s,n,o,"",(function(t){return t}))):null!=s&&(j(s)&&(s=function(t,n){return{$$typeof:r,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}(s,o+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+t)),n.push(s)),1;if(a=0,i=""===i?".":i+":",w(t))for(var c=0;c<t.length;c++){var p=i+A(u=t[c],c);a+=E(u,n,o,p,s)}else if(p=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=h&&t[h]||t["@@iterator"])?t:null}(t),"function"==typeof p)for(t=p.call(t),c=0;!(u=t.next()).done;)a+=E(u=u.value,n,o,p=i+A(u,c++),s);else if("object"===u)throw n=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return a}function F(t,n,r){if(null==t)return t;var e=[],o=0;return E(t,e,"","",(function(t){return n.call(r,t,o++)})),e}function B(t){if(-1===t._status){var n=t._result;(n=n()).then((function(n){0!==t._status&&-1!==t._status||(t._status=1,t._result=n)}),(function(n){0!==t._status&&-1!==t._status||(t._status=2,t._result=n)})),-1===t._status&&(t._status=0,t._result=n)}if(1===t._status)return t._result.default;throw t._result}var M={current:null},T={transition:null},D={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:T,ReactCurrentOwner:O};n.Children={map:F,forEach:function(t,n,r){F(t,(function(){n.apply(this,arguments)}),r)},count:function(t){var n=0;return F(t,(function(){n++})),n},toArray:function(t){return F(t,(function(t){return t}))||[]},only:function(t){if(!j(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},n.Component=v,n.Fragment=o,n.Profiler=s,n.PureComponent=m,n.StrictMode=i,n.Suspense=p,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,n.cloneElement=function(t,n,e){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=d({},t.props),i=t.key,s=t.ref,u=t._owner;if(null!=n){if(void 0!==n.ref&&(s=n.ref,u=O.current),void 0!==n.key&&(i=""+n.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in n)x.call(n,c)&&!P.hasOwnProperty(c)&&(o[c]=void 0===n[c]&&void 0!==a?a[c]:n[c])}var c=arguments.length-2;if(1===c)o.children=e;else if(1<c){a=Array(c);for(var p=0;p<c;p++)a[p]=arguments[p+2];o.children=a}return{$$typeof:r,type:t.type,key:i,ref:s,props:o,_owner:u}},n.createContext=function(t){return(t={$$typeof:a,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:t},t.Consumer=t},n.createElement=S,n.createFactory=function(t){var n=S.bind(null,t);return n.type=t,n},n.createRef=function(){return{current:null}},n.forwardRef=function(t){return{$$typeof:c,render:t}},n.isValidElement=j,n.lazy=function(t){return{$$typeof:f,_payload:{_status:-1,_result:t},_init:B}},n.memo=function(t,n){return{$$typeof:l,type:t,compare:void 0===n?null:n}},n.startTransition=function(t){var n=T.transition;T.transition={};try{t()}finally{T.transition=n}},n.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},n.useCallback=function(t,n){return M.current.useCallback(t,n)},n.useContext=function(t){return M.current.useContext(t)},n.useDebugValue=function(){},n.useDeferredValue=function(t){return M.current.useDeferredValue(t)},n.useEffect=function(t,n){return M.current.useEffect(t,n)},n.useId=function(){return M.current.useId()},n.useImperativeHandle=function(t,n,r){return M.current.useImperativeHandle(t,n,r)},n.useInsertionEffect=function(t,n){return M.current.useInsertionEffect(t,n)},n.useLayoutEffect=function(t,n){return M.current.useLayoutEffect(t,n)},n.useMemo=function(t,n){return M.current.useMemo(t,n)},n.useReducer=function(t,n,r){return M.current.useReducer(t,n,r)},n.useRef=function(t){return M.current.useRef(t)},n.useState=function(t){return M.current.useState(t)},n.useSyncExternalStore=function(t,n,r){return M.current.useSyncExternalStore(t,n,r)},n.useTransition=function(){return M.current.useTransition()},n.version="18.2.0"},41:(t,n,r)=>{t.exports=r(304)},85:(t,n,r)=>{t.exports=r(335)}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.d=(t,n)=>{for(var e in n)r.o(n,e)&&!r.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},r.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var e={};return(()=>{r.r(e),r.d(e,{Canvas:()=>Dn,CanvasContext:()=>On,CanvasProvider:()=>Sn,Circle:()=>Gn,CollectionContext:()=>Pn,Control:()=>lr,ControlNode:()=>hr,Defs:()=>zn,Ellipse:()=>Qn,Group:()=>Vn,Image:()=>tr,Interactive:()=>ur,LinearGradient:()=>Ln,Path:()=>Kn,Pattern:()=>Xn,Polygon:()=>Zn,Polyline:()=>Jn,RadialGradient:()=>Wn,Rect:()=>Un,Selector:()=>cr,ShapeTree:()=>ir,Text:()=>rr,Wrapper:()=>sr,useCanvas:()=>En,useCanvasContext:()=>jn,useCollection:()=>Fn,useCollectionContext:()=>Cn,useElement:()=>Bn,withCollectionContext:()=>Hn});var t,n=r(85),o=r(41),i=function(t,n,r){if(r||2===arguments.length)for(var e,o=0,i=n.length;o<i;o++)!e&&o in n||(e||(e=Array.prototype.slice.call(n,0,o)),e[o]=n[o]);return t.concat(e||Array.prototype.slice.call(n))},s=function(){function t(){this._listeners={}}return t.prototype.on=function(t,n){var r=this;if("object"==typeof t)for(var e in t)this.on(e,t[e]);else"string"==typeof t&&-1!==t.indexOf(" ")?t.split(" ").forEach((function(t){return r.on(t,n)})):(this._listeners[t]||(this._listeners[t]=[]),-1===this._listeners[t].indexOf(n)&&this._listeners[t].push(n));return this},t.prototype.once=function(){return this},t.prototype.off=function(t,n){if("object"==typeof t)for(var r in t)this.off(r,t[r]);else{var e=this._listeners[t];if(e){var o=e.indexOf(n);-1!==o&&e.splice(o,1)}}return this},t.prototype.trigger=function(t){for(var n,r,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var s=this._listeners[t],u=this._listeners.all;if(s)for(var a=0;a<s.length;a++)(n=s[a]).call.apply(n,i(i([this],e,!1),[t],!1));if(u)for(a=0;a<u.length;a++)(r=u[a]).call.apply(r,i(i([this],e,!1),[t],!1));return this},t}(),u=Math.PI/180,a=function(t,n,r){if(r||2===arguments.length)for(var e,o=0,i=n.length;o<i;o++)!e&&o in n||(e||(e=Array.prototype.slice.call(n,0,o)),e[o]=n[o]);return t.concat(e||Array.prototype.slice.call(n))},c=function(t,n,r){return Math.min(Math.max(t,n),r)},p=function(t,n){return void 0===n&&(n=2),Math.round(t*Math.pow(10,n))/Math.pow(10,n)||0},l=function(t){return t*u},f=function(t){return t/u},h=function(t,n,r){if(void 0===r&&(r=new Set),typeof t!=typeof n)return!1;if("object"!=typeof t||null===t||null===n)return t===n;if(t===n)return!0;if(r.has(t)||r.has(n))return!1;if(r.add(t),r.add(n),Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(!h(t[e],n[e],r))return!1;return!0}if("function"==typeof t&&"function"==typeof n)return t.toString()===n.toString();if("object"==typeof t&&"object"==typeof n){var o=Object.keys(t),i=Object.keys(n);if(o.length!==i.length)return!1;for(var s=0,u=o;s<u.length;s++){var a=u[s];if(!h(t[a],n[a],r))return!1}return!0}return!1},y={M:2,m:2,L:2,l:2,H:1,h:1,V:1,v:1,C:6,c:6,S:4,s:4,Q:4,q:4,T:2,t:2,A:7,a:7,Z:0,z:0},d=(t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)},function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}),g=function(){return g=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},g.apply(this,arguments)},v=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.id="",n.name="",n.className="",n}return d(n,t),n.prototype.getAttrMap=function(){return["className"]},n.prototype.set=function(t,n,r){var e;if(void 0===r&&(r=!1),"string"==typeof t&&void 0!==n)this._set(t,n),r||this.trigger("set",((e={})[t]=n,e),this);else{for(var o in t)this._set(o,t[o]);n||this.trigger("set",t,this)}return this},n.prototype._set=function(t,n){"function"!=typeof this[t]&&(this[t]=n)},n.prototype.get=function(t){var n=this;return Array.isArray(t)?t.reduce((function(t,r){return t[r]=n[r],t}),{}):this[t]},n.prototype.getAttributes=function(){var t,n=this;return this.getAttrMap().reduce((function(r,e){return void 0!==n[e]&&(t=n[e],t=Array.isArray(t)?t.join(" "):t,r[e]=t),r}),{})},n.prototype.getStyle=function(){return{}},n.prototype.createId=function(t){this.id||(this.id=function(t){var n,r=t?t+"-":"",e="";for(n=0;n<12;n++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[(0,61,Math.floor(62*Math.random())+0)];return r+e}(t))},n.prototype.addClass=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.className.split(" ").filter((function(t){return t})),e=t.filter((function(t){return t&&!r.includes(t)}));return this.set("className",r.concat(e).join(" ")),this},n.prototype.removeClass=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.className.split(" ");return this.set("className",r.filter((function(n){return!t.includes(n)})).join(" ")),this},n.prototype.toJSON=function(){var t=this,n=t.id,r=t.name,e=t.tagName,o=g({id:n,name:r,tagName:e},this.getAttributes()),i=this.isCollection&&this.mapChildren((function(t){return t.toJSON()}));return i&&(o.children=i),o},n}(s),_=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();function m(t){return function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.isCollection=!0,n.children=[],n}return _(n,t),n.prototype.setChildren=function(t,n){return void 0===n&&(n=!1),this.children=[],this.add(t,n),this},n.prototype.getChildren=function(){return this.children},n.prototype.add=function(t,n){var r=this;return void 0===n&&(n=!1),(t=Array.isArray(t)?t:[t]).forEach((function(t){r.children.push(t)})),n||this.trigger("added",t),this},n.prototype.remove=function(t,n){return void 0===n&&(n=!1),n||this.trigger("removed",t),this},n.prototype.eachChild=function(t){return this.children.forEach(t),this},n.prototype.mapChildren=function(t){return this.children.map(t)},n.prototype.childAt=function(t){return this.children[t]},n.prototype.childById=function(t){return this.children.find((function(n){return n.id===t}))},n.prototype.childByName=function(t){return this.children.find((function(n){return n.name===t}))},n}(t)}var b=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();function w(t){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return b(n,t),n.prototype.add=function(t,n){var r=this;return void 0===n&&(n=!1),(t=Array.isArray(t)?t:[t]).forEach((function(t){var n;if(r.children.push(t),t.set("parent",r,!0),r.isCanvas){var e=function(t){return t.set("canvas",r,!0)};e(t),t.isCollection&&t.eachChild(e)}var o,i,s=t.get("_defs")||{},u=[];for(o in s)(null==(i=s[o])?void 0:i.isDefinition)&&u.push(i);u.length&&(null===(n=t.get("canvas"))||void 0===n||n.addDefs(u))})),n||this.trigger("added",t),this},n.prototype.remove=function(t,n){return void 0===n&&(n=!1),n||this.trigger("removed",t),this},n.prototype.findChildrenByPointer=function(t){return this.mapChildren((function(n){var r=n.get("bBox");return!!r&&r.toPolygon(n.getWorldMatrix()).containsPoint(t,1)&&n})).filter((function(t){return null==t?void 0:t.selectable}))},n.prototype.findLastChildByPointer=function(t){var n=this.findChildrenByPointer(t);return n[n.length-1]},n}(m(t))}var x=function(){function t(t,n){void 0===t&&(t=new P),void 0===n&&(n=new P),this.min=t,this.max=n}return t.prototype.fromSizeAndOrigin=function(t,n){void 0===n&&(n=new P(.5,.5));var r=t.clone().multiply(n).multiplyScalar(-1);return this.min.copy(r),this.max.copy(t.clone().add(r)),this},t.prototype.fromPoints=function(t){this.flip();for(var n=0;n<t.length;n++)this.expandByPoint(t[n]);return this},t.prototype.expandByPoint=function(t){return this.min.min(t),this.max.max(t),this},t.prototype.getSize=function(){return(new P).subtractPoints(this.max,this.min)},t.prototype.getOrigin=function(){return(new P).subtract(this.min).divide(this.getSize())},t.prototype.getLineEdges=function(t){var n=this.min.x,r=this.min.y,e=this.max.x,o=this.max.y,i=new P(n,o),s=new P(e,o),u=new P(n,r),a=new P(e,r);return t&&(i=i.transform(t),s=s.transform(t),u=u.transform(t),a=a.transform(t)),[i,s,a,u]},t.prototype.toPolygon=function(t){var n=this.getLineEdges(t),r=n[0],e=n[1],o=n[2],i=n[3];return new Z([new A(r),new F(r,e),new F(e,o),new F(o,i),new F(i,r)])},t.prototype.contains=function(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y},t.prototype.intersects=function(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y},t.prototype.transform=function(t){var n=t.tx,r=t.ty,e=this.getLineEdges(t.clone().translate(0,0));return this.fromPoints(e).translate(n,r)},t.prototype.translate=function(t,n){var r=new P(t,n);return this.min.add(r),this.max.add(r),this},t.prototype.reset=function(){return this.min.set(0,0),this.max.set(0,0),this},t.prototype.flip=function(){return this.min.set(1/0,1/0),this.max.set(-1/0,-1/0),this},t.prototype.isEqual=function(t){return this.min.isEqual(t.min)&&this.max.isEqual(t.max)},t.prototype.isEmpty=function(){return this.min.isEqual(this.max)},t.prototype.intersect=function(t){return this.min.max(t.min),this.max.min(t.max),this},t.prototype.union=function(t){return this.min.min(t.min),this.max.max(t.max),this},t.prototype.copy=function(t){return this.min.copy(t.min),this.max.copy(t.max),this},t.prototype.clone=function(){return(new t).copy(this)},t}(),O=function(){function t(){this.r=0,this.g=0,this.b=0,this.a=1}return t.prototype.fromHEX=function(t){var n=t.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);return n&&(this.r=parseInt(n[1],16),this.g=parseInt(n[2],16),this.b=parseInt(n[3],16),this.a=void 0!==n[4]?parseFloat(n[4]):1),this},t.prototype.fromRGB=function(t){var n=t.match(/^rgba?\(\s*(\d{1,3}(?:\.\d+)?)\s*,\s*(\d{1,3}(?:\.\d+)?)\s*,\s*(\d{1,3}(?:\.\d+)?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i);return n&&(this.r=parseInt(n[1],10),this.g=parseInt(n[2],10),this.b=parseInt(n[3],10),this.a=void 0!==n[4]?parseFloat(n[4]):1),this},t.prototype.fromHSL=function(t){return this},t.prototype.fromArray=function(t){return this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3],this},t.prototype.fromObject=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.toHEX=function(){var t=this.r.toString(16),n=this.g.toString(16),r=this.b.toString(16);return t=1===t.length?"0"+t:t,n=1===n.length?"0"+n:n,r=1===r.length?"0"+r:r,"#"+t.toUpperCase()+n.toUpperCase()+r.toUpperCase()},t.prototype.toHEXA=function(){var t=parseInt(255*this.a).toString(16);return t=1===t.length?"0"+t:t,this.toHEX()+t.toUpperCase()},t.prototype.toRGB=function(){var t=this,n=t.r,r=t.g,e=t.b;return"rgb(".concat(n,", ").concat(r,", ").concat(e,")")},t.prototype.toRGBA=function(){var t=this,n=t.r,r=t.g,e=t.b,o=t.a;return"rgba(".concat(n,", ").concat(r,", ").concat(e,", ").concat(o,")")},t.prototype.toHSL=function(){return""},t.prototype.toArray=function(){var t=this;return[t.r,t.g,t.b,t.a]},t.prototype.toObject=function(){var t=this;return{r:t.r,g:t.g,b:t.b,a:t.a}},t.prototype.copy=function(t){return this.fromArray(t.toArray())},t.prototype.clone=function(){return(new t).copy(this)},t.isColor=function(n){return t.isHEX(n)||t.isRGB(n)||t.isColorName(n)},t.isColorName=function(n){return t.isHEX(t.colorNameMap[n])},t.isHEX=function(t){var n=/^(#?)([a-f0-9]{3}){1,2}$/i.test(t),r=/^(#?)([a-f0-9]{8})$/i.test(t);return n||r},t.isRGB=function(t){var n=/^(rgb)[(]\s*([\d.]+\s*)\s*,\s*([\d.]+\s*)\s*,\s*([\d.]+\s*)\s*[)]$/.test(t),r=/^(rgba)[(]\s*([\d.]+\s*)\s*,\s*([\d.]+\s*)\s*,\s*([\d.]+\s*)\s*,\s*([\d.]+\s*)\s*[)]$/.test(t);return n||r},t.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32",none:"#00000000",transparent:"#00000000"},t}(),P=function(){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.set(t,n)}return t.prototype.set=function(t,n){return this.x=t,this.y=n,this},t.prototype.setX=function(t){return this.x=t,this},t.prototype.setY=function(t){return this.y=t,this},t.prototype.fromObject=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.toObject=function(){return{x:this.x,y:this.y}},t.prototype.fromString=function(t,n){void 0===n&&(n=", ");var r=t.split(n).map((function(t){return parseFloat(t)}));return this.x=r[0],this.y=r[1],this},t.prototype.toString=function(t){return void 0===t&&(t=" "),[this.x,this.y].join(t)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},t.prototype.addPoints=function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.subtractScalar=function(t){return this.x-=t,this.y-=t,this},t.prototype.subtractPoints=function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this},t.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},t.prototype.multiplyPoints=function(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this},t.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.divideScalar=function(t){return this.x/=t,this.y/=t,this},t.prototype.dividePoints=function(t,n){return this.x=t.x/n.x,this.y=t.y/n.y,this},t.prototype.lerp=function(t,n){return n=c(n,0,1),this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this},t.prototype.rotate=function(t,n){var r=l(n),e=Math.cos(r),o=Math.sin(r),i=this.x-t.x,s=this.y-t.y;return this.x=i*e-s*o+t.x,this.y=i*o+s*e+t.y,this},t.prototype.angleTo=function(t){return f(Math.atan2(t.y-this.y,t.x-this.x))},t.prototype.distanceTo=function(t){var n=this.x-t.x,r=this.y-t.y;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.transform=function(t){var n=this.x,r=this.y,e=t.a,o=t.b,i=t.c,s=t.d,u=t.tx,a=t.ty;return this.x=e*n+i*r+u,this.y=o*n+s*r+a,this},t.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},t.prototype.minPoints=function(t,n){return this.x=Math.min(t.x,n.x),this.y=Math.min(t.y,n.y),this},t.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},t.prototype.maxPoints=function(t,n){return this.x=Math.max(t.x,n.x),this.y=Math.max(t.y,n.y),this},t.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t.prototype.clamp=function(t,n){return this.x=c(this.x,t.x,n.x),this.y=c(this.y,t.y,n.y),this},t.prototype.isEqual=function(t){return this.x===t.x&&this.y===t.y},t.prototype.copy=function(t){return this.set(t.x,t.y),this},t.prototype.clone=function(){return(new t).copy(this)},t}(),S=new P,j=function(){function t(){this.command="",this._bBox=new x}return t.prototype.getPoint=function(t){return console.warn("getPoint() must be implemented by subclass."),new P},t.prototype.getPoints=function(t){void 0===t&&(t=10);for(var n=[],r=0;r<=t;r++)n.push(this.getPoint(r/t));return n},t.prototype.updateBBox=function(){return this._bBox.fromPoints(this.getPoints()),this},t.prototype.getBBox=function(){return this._bBox},t.prototype.fromArray=function(t,n,r){var e,o,i,s=r[n-1]||[],u=s.length,a=t.length,c=t[0]===t[0].toLowerCase(),p=new P(s[u-2],s[u-1]);for(this.p0&&("M"===this.command?this.p0.set(t[1],t[2]):this.p0.copy(p)),o=0,i=1;o<a-1;o+=2,i++)(e=this["p"+i])&&(e.set(t[o+1],t[o+2]),c&&e.add(p));return this},t.prototype.toString=function(){for(var t=[],n="M"===this.command?0:1;this["p"+n];)t.push(this["p"+n].toString()),n++;return this.command+" "+t.join(" ")},t.prototype.translate=function(t,n){for(var r=0;this["p"+r];)this["p"+r].add(S.set(t,n)),r++;return this},t}(),C=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),A=function(t){function n(n){void 0===n&&(n=new P);var r=t.call(this)||this;return r.command="M",r.p0=n,r}return C(n,t),n.prototype.getPoint=function(t){return this.p0.clone()},n.prototype.getPoints=function(t){return void 0===t&&(t=10),[this.getPoint(0)]},n}(j),E=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),F=function(t){function n(n,r){void 0===n&&(n=new P),void 0===r&&(r=new P);var e=t.call(this)||this;return e.command="L",e.p0=n,e.p1=r,e}return E(n,t),n.prototype.getPoint=function(t){t=c(t,0,1);var n=this.p1.clone();return 1===t||n.subtract(this.p0).multiplyScalar(t).add(this.p0),n},n}(j),B=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),M=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.command="H",n}return B(n,t),n.prototype.fromArray=function(t,n,r){for(var e,o=r[n-1]||[],i=o.length,s=t[0]===t[0].toLowerCase(),u=new P(o[i-2],o[i-1]),a=0,c=0,p=!1,l=!1,f=n;2===r[f--].length;)switch(e=r[f],r[f-1],e[0]){case"H":p||(a=e[1],p=!0);break;case"V":l||(c=e[1],l=!0);break;default:p||(a=e[e.length-2],p=!0),l||(c=e[e.length-1],l=!0)}return this.p0.set(a,c),this.p1.set(t[1],c),s&&(this.p0.add(u),this.p1.add(u)),this},n.prototype.toString=function(){return this.command+" "+this.p1.x},n}(F),T=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),D=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.command="V",n}return T(n,t),n.prototype.fromArray=function(t,n,r){for(var e,o=r[n-1]||[],i=o.length,s=t[0]===t[0].toLowerCase(),u=new P(o[i-2],o[i-1]),a=0,c=0,p=!1,l=!1,f=n;2===r[f--].length;)switch(e=r[f],r[f-1],e[0]){case"H":p||(a=e[1],p=!0);break;case"V":l||(c=e[1],l=!0);break;default:p||(a=e[e.length-2],p=!0),l||(c=e[e.length-1],l=!0)}return this.p0.set(a,c),this.p1.set(a,t[1]),s&&(this.p0.add(u),this.p1.add(u)),this},n.prototype.toString=function(){return this.command+" "+this.p1.y},n}(F),k=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),N=function(t){function n(n,r,e,o,i,s,u){void 0===n&&(n=new P),void 0===r&&(r=0),void 0===e&&(e=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=new P);var a=t.call(this)||this;return a.command="A",a.p0=n,a.p1=u,a.rx=r,a.ry=e,a.xAxisRotation=o,a.largeArcFlag=i,a.sweepFlag=s,a}return k(n,t),n.prototype.getPoint=function(t){return new P},n.prototype.fromArray=function(t,n,r){var e=r[n-1]||[],o=e.length;return t.length,this.p0.set(e[o-2],e[o-1]),this.rx=t[1],this.ry=t[2],this.xAxisRotation=t[3],this.largeArcFlag=t[4],this.sweepFlag=t[5],this.p1.set(t[6],t[7]),this},n.prototype.toString=function(){var t=this,n=t.command,r=t.rx,e=t.ry,o=t.xAxisRotation,i=t.largeArcFlag,s=t.sweepFlag,u=t.p1;return"".concat(n," ").concat(r," ").concat(e," ").concat(o," ").concat(i," ").concat(s," ").concat(u.toString())},n}(j),z=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),I=function(t){function n(n,r,e){void 0===n&&(n=new P),void 0===r&&(r=new P),void 0===e&&(e=new P);var o=t.call(this)||this;return o.command="Q",o.p0=n,o.p1=r,o.p2=e,o}return z(n,t),n.prototype.getPoint=function(t){return new P(n.interpolation(t,this.p0.x,this.p1.x,this.p2.x),n.interpolation(t,this.p0.y,this.p1.y,this.p2.y))},n.interpolation=function(t,n,r,e){var o=1-t;return o*o*n+2*o*t*r+t*t*e},n}(j),R=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),L=function(t){function n(n,r,e,o){void 0===n&&(n=new P),void 0===r&&(r=new P),void 0===e&&(e=new P),void 0===o&&(o=new P);var i=t.call(this)||this;return i.command="C",i.p0=n,i.p1=r,i.p2=e,i.p3=o,i}return R(n,t),n.prototype.getPoint=function(t){return new P(n.interpolation(t,this.p0.x,this.p1.x,this.p2.x,this.p3.x),n.interpolation(t,this.p0.y,this.p1.y,this.p2.y,this.p3.y))},n.interpolation=function(t,n,r,e,o){var i=1-t;return i*i*i*n+3*i*i*t*r+3*i*t*t*e+t*t*t*o},n}(j),W=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),X=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.command="T",n}return W(n,t),n.prototype.fromArray=function(t,n,r){var e=r[n-1]||[],o=e.length,i=t[0]===t[0].toLowerCase(),s=["Q","q","T","t"].includes(e[0]),u=new P(e[o-2],e[o-1]),a=new P(e[o-4],e[o-3]);if(this.p0.copy(u),s?this.p1.copy(u).multiplyScalar(2).subtract(a):(console.warn("The previous command must be an other T, or Q command."),this.p1.copy(u)),this.p2.set(t[1],t[2]),i)for(var c=0;c<4;c++)this["p"+c].add(u);return this},n.prototype.toString=function(){return this.command+" "+this.p2.toString()},n}(I),$=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),q=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.command="S",n}return $(n,t),n.prototype.fromArray=function(t,n,r){var e=r[n-1]||[],o=e.length,i=t[0]===t[0].toLowerCase(),s=["C","c","S","s"].includes(e[0]),u=new P(e[o-2],e[o-1]),a=new P(e[o-4],e[o-3]);if(this.p0.copy(u),s?this.p1.copy(u).multiplyScalar(2).subtract(a):(console.warn("The previous command must be an other S, or C command."),this.p1.copy(u)),this.p2.set(t[1],t[2]),this.p3.set(t[3],t[4]),i)for(var c=0;c<4;c++)this["p"+c].add(u);return this},n.prototype.toString=function(){return this.command+" "+this.p2.toString()+" "+this.p3.toString()},n}(L),V=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Y=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.command="Z",n}return V(n,t),n.prototype.getPoints=function(t){return void 0===t&&(t=10),[]},n}(j),H={M:A,L:F,V:D,H:M,Q:I,C:L,T:X,S:q,A:N,Z:Y},U=new P;function G(t,n){var r,e,o=1/0,i=-1/0;for(r=0;r<t.length;r++)e=t[r].dot(n),o=Math.min(o,e),i=Math.max(i,e);return{min:o,max:i}}function Q(t,n,r){var e=G(t,r),o=G(n,r);return e.max<o.min||o.max<e.min}var K,Z=function(){function t(t){this._curves=[],this._currentCommand="",this._currentPoint=new P,this._currentControlPoint=new P,this._bBox=new x,t&&this.set(t)}return Object.defineProperty(t.prototype,"length",{get:function(){return this._curves.length},enumerable:!1,configurable:!0}),t.prototype.at=function(t){return this._curves[t]},t.prototype.add=function(t){var n;return t=Array.isArray(t)?t:[t],(n=this._curves).push.apply(n,t),this},t.prototype.remove=function(t){return t=Array.isArray(t)?t:[t],this._curves=this._curves.filter((function(n){return!t.includes(n)})),this},t.prototype.set=function(t){return this._curves=[],this.add(t)},t.prototype.moveTo=function(t,n){var r=new A(new P(t,n));return this._currentPoint.set(t,n),this._currentCommand="M",this.add(r)},t.prototype.lineTo=function(t,n){var r=new F(this._currentPoint.clone(),new P(t,n));return this._currentPoint.set(t,n),this._currentCommand="L",this.add(r)},t.prototype.horizontalLineTo=function(t){var n=this._currentPoint.clone(),r=new M(n,new P(t,n.y));return this._currentPoint.setX(t),this._currentCommand="H",this.add(r)},t.prototype.verticalLineTo=function(t){var n=this._currentPoint.clone(),r=new D(n,new P(n.x,t));return this._currentPoint.setY(t),this._currentCommand="V",this.add(r)},t.prototype.quadraticCurveTo=function(t,n,r,e){var o=new I(this._currentPoint.clone(),new P(t,n),new P(r,e));return this._currentPoint.set(r,e),this._currentControlPoint.set(t,n),this._currentCommand="Q",this.add(o)},t.prototype.smoothQuadraticCurveTo=function(t,n){"T"!==this._currentCommand&&"Q"!==this._currentCommand&&console.warn("The previous method must be an other smoothQuadraticCurveTo(), or a quadraticCurveTo().");var r=this._currentPoint.clone().multiplyScalar(2).subtract(this._currentControlPoint),e=new X(this._currentPoint.clone(),r,new P(t,n));return this._currentPoint.set(t,n),this._currentControlPoint.copy(r),this._currentCommand="T",this.add(e)},t.prototype.cubicCurveTo=function(t,n,r,e,o,i){var s=new L(this._currentPoint.clone(),new P(t,n),new P(r,e),new P(o,i));return this._currentPoint.set(o,i),this._currentControlPoint.set(r,e),this._currentCommand="C",this.add(s)},t.prototype.smoothCubicCurveTo=function(t,n,r,e){"S"!==this._currentCommand&&"C"!==this._currentCommand&&console.warn("The previous method must be an other smoothCubicCurveTo(), or a cubicCurveTo().");var o=this._currentPoint.clone().multiplyScalar(2).subtract(this._currentControlPoint);return new q(this._currentPoint.clone(),o,new P(t,n),new P(r,e)),this._currentPoint.set(r,e),this._currentControlPoint.copy(o),this._currentCommand="S",this},t.prototype.arcTo=function(t,n,r,e,o,i,s){var u=new N(this._currentPoint.clone(),t,n,r,e,o,new P(i,s));return this._currentPoint.set(i,s),this._currentCommand="A",this.add(u)},t.prototype.closePath=function(){var t=new Y;return this._currentCommand="Z",this.add(t)},t.prototype.fromString=function(t){var n=function(t){var n=[];return(t.match(/([MmLlHhVvCcSsQqTtAaZz])([^MmLlHhVvCcSsQqTtAaZz]+)?/g)||[]).forEach((function(t,r,e){var o=(t=t.trim()).replace(/[^MmLlHhVvCcSsQqTtAaZz]/g,""),i=(t.match(/[\-\.\d]+/g)||[]).map((function(t){return p(t)})),s=y[o];i.length===s?n.push(a([o],i,!0)):function(t,n){for(var r=[],e=0;e<t.length;e+=n)r.push(t.slice(e,e+n));return r}(i,s).forEach((function(t){n.push(a([o],t,!0))}))})),n}(t).map((function(t,n,r){var e=(t[0]||"").toUpperCase();return(new(0,H[e])).fromArray(t,n,r)}));return this.set(n)},t.prototype.toString=function(){return this._curves.map((function(t){return t.toString(" ")})).join(" ")},t.prototype.fromNumbers=function(t){var n,r=t.replace(/\,\s?/g," ").split(" ").map((function(t){return p(t)})),e=[];for(n=0;n<r.length;n+=2)e.push(new F(new P(r[n],r[n+1]),new P(r[(n+2)%r.length],r[(n+3)%r.length])));return this.set(e)},t.prototype.toNumbers=function(){return this.mapCurves((function(t){if(t instanceof F)return t.p0.toString()})).filter((function(t){return!!t})).join(" ")},t.prototype.toPoints=function(t){var n;return this.mapCurves((function(n){return n.getPoints(t)})).flat().filter((function(t,r,e){return!(n=e[r-1])||!t.isEqual(n)}))},t.prototype.updateBBox=function(){var t=this;return this._bBox.flip(),this.eachCurve((function(n){t._bBox.union(n.updateBBox().getBBox())}))},t.prototype.getBBox=function(){return this._bBox},t.prototype.adjust=function(){var t=this._bBox.min,n=t.x,r=t.y;return this.eachCurve((function(t){t.translate(-n,-r)})),this},t.prototype.containsPoint=function(t,n){var r,e,o,i,s,u,a=t.x,c=t.y,p=this.toPoints(n),l=!1;for(r=0,e=p.length-1;r<p.length;e=r++)o=p[r].x,i=p[r].y,s=p[e].x,i>c!=(u=p[e].y)>c&&a<(s-o)*(c-i)/(u-i)+o&&(l=!l);return l},t.prototype.intersects=function(t,n){var r,e,o,i,s,u=this.toPoints(n),a=t.toPoints(n),c=u.length,p=a.length;for(r=0;r<c;r++)if(e=u[r],o=u[(r+1)%c],U.copy(o).subtract(e),i=U.x,s=U.y,Q(u,a,U.set(-s,i)))return!1;for(r=0;r<p;r++)if(e=a[r],o=a[(r+1)%p],U.copy(o).subtract(e),i=U.x,s=U.y,Q(u,a,U.set(-s,i)))return!1;return!0},t.prototype.eachCurve=function(t){return this._curves.forEach(t),this},t.prototype.mapCurves=function(t){return this._curves.map(t)},t}(),J=function(){function t(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}return t.prototype.fromArray=function(t){return this.a=t[0],this.b=t[1],this.c=t[2],this.d=t[3],this.tx=t[4],this.ty=t[5],this},t.prototype.fromObject=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.fromOptions=function(t){var n=t.left,r=t.top,e=t.angle,o=t.scaleX,i=t.scaleY,s=t.skewX,u=t.skewY;return this.reset(),this.translate(n,r),this.rotate(e),this.scaleX(o),this.scaleY(i),this.skewX(s),this.skewY(u),this},t.prototype.fromCSS=function(t){var n=t.replace("matrix(","").replace(")","").split(" ").map(parseFloat);return this.fromArray(n),this},t.prototype.toArray=function(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]},t.prototype.toObject=function(){return{a:this.a,b:this.b,c:this.c,d:this.d,tx:this.tx,ty:this.ty}},t.prototype.toOptions=function(){var t=this,n=t.a,r=t.b,e=t.c,o=t.d,i=t.tx,s=t.ty,u=f(Math.atan2(r,n)),a=Math.pow(n,2)+Math.pow(r,2),c=Math.sqrt(a);return{left:i,top:s,angle:u,scaleX:c,scaleY:(n*o-e*r)/c,skewX:f(Math.atan2(n*e+r*o,a)),skewY:0}},t.prototype.toCSS=function(){var t=this.toArray().join(", ");return"matrix(".concat(t,")")},t.prototype.translate=function(t,n){return this.tx=t,this.ty=n,this},t.prototype.rotate=function(n){if(!n)return this;var r=l(n),e=Math.cos(r),o=Math.sin(r),i=(new t).fromArray([e,o,-o,e,0,0]);return this.multiply(i)},t.prototype.scale=function(n,r){if(void 0===n)return this;void 0===r&&(r=n);var e=(new t).fromArray([n,0,0,r,0,0]);return this.multiply(e)},t.prototype.scaleX=function(n){if(void 0===n)return this;var r=(new t).fromArray([n,0,0,1,0,0]);return this.multiply(r)},t.prototype.scaleY=function(n){if(void 0===n)return this;var r=(new t).fromArray([1,0,0,n,0,0]);return this.multiply(r)},t.prototype.skewX=function(n){if(!n)return this;var r=l(n),e=(new t).fromArray([1,0,Math.tan(r),1,0,0]);return this.multiply(e)},t.prototype.skewY=function(n){if(!n)return this;var r=l(n),e=(new t).fromArray([1,Math.tan(r),0,1,0,0]);return this.multiply(e)},t.prototype.multiply=function(t){var n=this.a*t.a+this.c*t.b,r=this.b*t.a+this.d*t.b,e=this.a*t.c+this.c*t.d,o=this.b*t.c+this.d*t.d,i=this.a*t.tx+this.c*t.ty+this.tx,s=this.b*t.tx+this.d*t.ty+this.ty;return this.fromObject({a:n,b:r,c:e,d:o,tx:i,ty:s})},t.prototype.invert=function(){var t=this,n=t.a,r=t.b,e=t.c,o=t.d,i=t.tx,s=t.ty,u=n*o-r*e;return 0===u?this.fromArray([0,0,0,0,0,0]):this.fromArray([o/u,-r/u,-e/u,n/u,(e*s-o*i)/u,(r*i-n*s)/u])},t.prototype.reset=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.copy=function(t){return this.fromArray(t.toArray())},t.prototype.clone=function(){return(new t).copy(this)},t}(),tt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),nt=function(){return nt=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},nt.apply(this,arguments)},rt=new P,et=new P,ot=new P,it=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.tagName="div",n.className="grafik-selector",n.bBox=new x,n}return tt(n,t),n.prototype.getAttributes=function(){var n=t.prototype.getAttributes.call(this);return nt(nt({},n),{"data-selector":!0})},n.prototype.getStyle=function(){var t=this.bBox,n=t.min,r=t.max;return rt.minPoints(n,r),et.maxPoints(n,r),ot.subtractPoints(et,rt),{left:rt.x,top:rt.y,width:ot.x,height:ot.y}},n}(v),st=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),ut=function(){return ut=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},ut.apply(this,arguments)},at=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.tagName="div",n.className="grafik-control",n}return st(n,t),n.prototype.init=function(t){this.set(t),this.setNodes(),this.onPointerStart=this.onPointerStart.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerEnd=this.onPointerEnd.bind(this)},n.prototype.setNodes=function(){return this},n.prototype.getSize=function(){var t=this.shape.getWorldMatrix().toOptions(),n=t.scaleX,r=t.scaleY;return this.shape.bBox.getSize().multiply(new P(n,r))},n.prototype.getStyle=function(){var t=this.shape.getWorldMatrix().toOptions(),n=t.left,r=t.top,e=t.angle,o=this.getSize(),i=this.shape.origin.clone().multiplyScalar(100),s=i.x,u=i.y;return{width:Math.abs(o.x),height:Math.abs(o.y),left:n,top:r,transform:"translate(".concat(-s,"%, ").concat(-u,"%) rotate(").concat(e,"deg)"),transformOrigin:"".concat(s,"% ").concat(u,"%")}},n.prototype.getAttributes=function(){var n=t.prototype.getAttributes.call(this);return ut(ut({},n),{"data-control":!0,"data-shape":this.shape.get("id")})},n.prototype.onPointerStart=function(t){},n.prototype.onPointerMove=function(t){},n.prototype.onPointerEnd=function(t){},n}(w(v)),ct=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),pt=function(){return pt=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},pt.apply(this,arguments)},lt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.tagName="div",n.className="grafik-control-node",n.name="",n.offset=new P,n}return ct(n,t),n.prototype.init=function(t){this.set(t),this.createId("node"),this.name&&this.addClass("grafik-control-node__"+this.name),t.getPosition&&(this.getPosition=t.getPosition.bind(this)),this.onPointerStart=this.onPointerStart.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerEnd=this.onPointerEnd.bind(this)},Object.defineProperty(n.prototype,"x",{get:function(){return this.offset.x},set:function(t){this.offset.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.offset.y},set:function(t){this.offset.y=t},enumerable:!1,configurable:!0}),n.prototype.getPosition=function(){var t=this.getControlSize(),n=this.offset,r=n.x,e=n.y;return new P(t.x*r,t.y*e)},n.prototype.connectTo=function(t){return this.connectedWith=t,t},n.prototype.getLineMatrix=function(){if(!this.connectedWith)return new J;var t=this.getPosition(),n=this.connectedWith.getPosition(),r=new J,e=-t.angleTo(n);return r.rotate(e)},n.prototype.getShape=function(){return this.parent.shape},n.prototype.getControlSize=function(){return this.parent.getSize()},n.prototype.getStyle=function(){var t=this.getPosition();return{left:t.x,top:t.y}},n.prototype.getAttributes=function(){var n=t.prototype.getAttributes.call(this);return pt(pt({},n),{"data-control-node":!0,"data-id":this.id,"data-name":this.name,"data-shape":this.getShape().get("id")})},n.prototype.onPointerStart=function(t){},n.prototype.onPointerMove=function(t){},n.prototype.onPointerEnd=function(t){},n}(w(v)),ft=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),ht=function(t){function n(n){var r=t.call(this)||this;return r._isDragging=!1,r._startVector=new P,r.init(n),r.addClass("grafik-transform-control"),r}return ft(n,t),n.prototype.setNodes=function(){var t=this,n=t.shape,r=new Pt({name:"tl",axis:"",x:0,y:0}),e=new Pt({name:"tc",axis:"y",x:.5,y:0}),o=new Pt({name:"tr",axis:"",x:1,y:0}),i=new Pt({name:"ml",axis:"x",x:0,y:.5}),s=new Pt({name:"mr",axis:"x",x:1,y:.5}),u=new Pt({name:"bl",axis:"",x:0,y:1}),a=new Pt({name:"bc",axis:"y",x:.5,y:1}),c=new Pt({name:"br",axis:"",x:1,y:1}),p=new bt({name:"a",getPosition:function(){var n=t.getSize().x;return new P(n+20,-20)}}),l=new xt({name:"o",getPosition:function(){var r=t.getSize(),e=n.get("origin"),o=e.x,i=e.y;return new P(r.x*o,r.y*i)}});return this.add([r,e,o,i,s,u,a,c,p,l]),this},n.prototype.onPointerStart=function(t){var n=this.shape,r=n.get("canvas"),e=n.getWorldMatrix().toOptions(),o=e.left,i=e.top;this._isDragging=!0,this._startVector.subtractPoints(r.getPointer(t),new P(o,i))},n.prototype.onPointerMove=function(t){if(this._isDragging){var n=this.shape,r=n.get("canvas"),e=n.parent.isCanvas?r.get("viewportMatrix").clone():n.parent.getWorldMatrix(),o=r.getPointer(t).subtract(this._startVector).transform(e.invert());n.set({left:p(o.x),top:p(o.y)})}},n.prototype.onPointerEnd=function(t){this._isDragging=!1},n}(at),yt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),dt=function(t){function n(n){var r=t.call(this)||this;return r.init(n),r.addClass("grafik-path-control"),r}return yt(n,t),n.prototype.setNodes=function(){return this},n}(at),gt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),vt=function(t){function n(n){var r=t.call(this)||this;return r.init(n),r.addClass("grafik-text-control"),r}return gt(n,t),n}(at),_t=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),mt=(_t((function(t){var n=K.call(this)||this;return n.init(t),n.addClass("grafik-gradient-control"),n}),K=at),function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}()),bt=function(t){function n(n){var r=t.call(this)||this;return r._isDragging=!1,r._startAngle=0,r._startVector=0,r.init(n),r}return mt(n,t),n.prototype.onPointerStart=function(t){var n=this.getShape(),r=n.getWorldMatrix().toOptions(),e=r.left,o=r.top;this._isDragging=!0,this._startAngle=n.get("angle"),this._startMatrix=(new J).translate(e,o).invert(),this._startVector=(new P).angleTo(n.getLocalPointer(t,this._startMatrix))},n.prototype.onPointerMove=function(t){if(this._isDragging){var n=this.getShape(),r=n.getLocalPointer(t,this._startMatrix),e=(new P).angleTo(r)-this._startVector,o=p(this._startAngle+e);o<0&&(o+=360),o%=360,n.set("angle",o)}},n.prototype.onPointerEnd=function(t){this._isDragging=!1},n}(lt),wt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),xt=function(t){function n(n){var r=t.call(this)||this;return r._isDragging=!1,r._startVector=new P,r._startPosition=new P,r._startOrigin=new P,r.init(n),r}return wt(n,t),n.prototype.onPointerStart=function(t){var n=this.getShape(),r=n.get("canvas"),e=n.getWorldMatrix().toOptions(),o=e.left,i=e.top;this._isDragging=!0,this._startVector.copy(r.getPointer(t)),this._startPosition.set(o,i),this._startOrigin.copy(n.get("origin"))},n.prototype.onPointerMove=function(t){if(this._isDragging){var n=this.getShape(),r=n.get("canvas"),e=n.parent.isCanvas?r.get("viewportMatrix").clone():n.parent.getWorldMatrix(),o=r.getPointer(t).subtract(this._startVector.clone().subtract(this._startPosition)).transform(e.clone().invert()),i=n.getWorldMatrix().invert().translate(0,0),s=r.getPointer(t).subtract(this._startVector).divide(n.bBox.getSize()).transform(i).add(this._startOrigin);n.set({left:p(o.x),top:p(o.y),origin:s})}},n.prototype.onPointerEnd=function(t){this._isDragging=!1},n}(lt),Ot=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Pt=function(t){function n(n){var r=t.call(this)||this;return r.axis="",r._isDragging=!1,r._startScale=new P,r._startSize=new P,r._startMatrix=new J,r.init(n),r}return Ot(n,t),n.prototype.onPointerStart=function(t){var n=this.getShape();this._isDragging=!0,this._startScale.set(n.get("scaleX"),n.get("scaleY")),this._startSize.copy(this.getControlSize()),this._startMatrix.copy(n.getWorldMatrix().invert())},n.prototype.onPointerMove=function(t){if(this._isDragging){var n=this.getShape(),r=n.getLocalPointer(t,this._startMatrix),e=new P(this.x+(1-2*this.x)*n.originX,this.y+(1-2*this.y)*n.originX),o=r.divide(this._startSize.clone().multiply(e).divide(this._startScale)),i=(new P).multiplyPoints(this._startScale,o).abs(),s={};"x"===this.axis?s.scaleX=p(i.x):"y"===this.axis?s.scaleY=p(i.y):(s.scaleX=p(Math.max(i.x,i.y)),s.scaleY=p(Math.max(i.x,i.y))),n.set(s)}},n.prototype.onPointerEnd=function(t){this._isDragging=!1},n}(lt),St=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),jt={select:"_onPointerStartInSelectMode",pan:"_onPointerStartInPanMode",draw:"_onPointerStartInDrawMode"},Ct={select:"_onPointerMoveInSelectMode",pan:"_onPointerMoveInPanMode",draw:"_onPointerMoveInDrawMode"},At={select:"_onPointerEndInSelectMode",pan:"_onPointerEndInPanMode",draw:"_onPointerEndInDrawMode"},Et=function(t){function n(n){void 0===n&&(n={});var r=t.call(this)||this;return r.isCanvas=!0,r.multiselection=!0,r.zoomable=!0,r.mode="select",r.tagName="svg",r.xmlns="http://www.w3.org/2000/svg",r.preserveAspectRatio="xMidYMid slice",r.className="grafik-canvas",r.width=0,r.height=0,r.viewportMatrix=new J,r._defs=[],r._selectedShapes=[],r._selector=new it,r._selection=!1,r._zoom=1,r._pan=new P,r._isDragging=!1,r._startVector=new P,r.set(n,!0),r.trigger("init",r),r}return St(n,t),Object.defineProperty(n.prototype,"zoom",{get:function(){return this._zoom},set:function(t){this._zoom=t,this.zoomTo(this._zoom,this._pan)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"panX",{get:function(){return this._pan.x},set:function(t){this._pan.x=t,this.zoomTo(this._zoom,this._pan)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"panY",{get:function(){return this._pan.y},set:function(t){this._pan.y=t,this.zoomTo(this._zoom,this._pan)},enumerable:!1,configurable:!0}),n.prototype.getAttrMap=function(){return t.prototype.getAttrMap.call(this).concat(["xmlns","width","height","viewBox","preserveAspectRatio"])},n.prototype.selectShapes=function(t,n){var r=this;void 0===n&&(n=!1),t=Array.isArray(t)?t:[t];var e=this._selectedShapes.length;return t.forEach((function(t){!r._selectedShapes.includes(t)&&t.selectable&&r._selectedShapes.push(t)})),n&&e===this._selectedShapes.length||(this.trigger("shapes:selected",t),this.trigger("shapes:selection:updated",t)),this},n.prototype.releaseShapes=function(t,n){void 0===n&&(n=!1),t=Array.isArray(t)?t:[t];var r=this._selectedShapes.length;return(null==t?void 0:t[0])?this._selectedShapes=this._selectedShapes.filter((function(n){return!t.includes(n)})):this._selectedShapes=[],n&&r===this._selectedShapes.length||(this.trigger("shapes:released",t),this.trigger("shapes:selection:updated",t)),this},n.prototype.getSelectedShapes=function(){return this._selectedShapes},n.prototype.eachSelectedShape=function(t){return this._selectedShapes.forEach(t),this},n.prototype.mapSelectedShapes=function(t){return this._selectedShapes.map(t)},n.prototype.addDefs=function(t,n){var r=this;return void 0===n&&(n=!1),(t=Array.isArray(t)?t:[t]).forEach((function(t){r._defs.includes(t)||r._defs.push(t)})),n||this.trigger("defs:added",t),this},n.prototype.removeDefs=function(t,n){return void 0===n&&(n=!1),this},n.prototype.getDefs=function(){return this._defs},n.prototype.eachDef=function(t){return this._defs.forEach(t),this},n.prototype.mapDefs=function(t){return this._defs.map(t)},n.prototype.getSelector=function(){return this._selector},n.prototype.setResponsiveSize=function(t,n){return this._originalWidth||(this._originalWidth=this.width),this._originalHeight||(this._originalHeight=this.height),this.set({width:Math.min(t,this._originalWidth),height:Math.min(n,this._originalHeight)}).zoomTo(),this},n.prototype.zoomTo=function(t,n){void 0===t&&(t=1),void 0===n&&(n=new P);var r=this.getSize(),e=r.clone().multiplyScalar(t),o=(new P).subtractPoints(e,r).divideScalar(2).multiplyScalar(-1).add(n);this.viewportMatrix.fromArray([t,0,0,t,o.x,o.y]);var i=this.viewportMatrix,s=i.a,u=i.d,a=i.tx,c=i.ty,p=this.width,l=this.height;return this.set("viewBox",[-a/s,-c/u,p/s,l/u]),this._zoom=t,this._pan.copy(n),this},n.prototype.getSize=function(){return new P(this.width,this.height)},n.prototype.getPointer=function(t){var n=t.currentTarget.getBoundingClientRect(),r=n.left,e=n.top;return new P(t.clientX-r,t.clientY-e)},n.prototype._onPointerStartInSelectMode=function(t){var n=t.target.dataset,r=n.shape,e="controlNode"in n,o=this.getPointer(t),i=this.findLastChildByPointer(o);this.getSelectedShapes().includes(i)&&i.isCollection&&(i=i.findLastChildByPointer(o))&&(r=""),e?(this._currentNodeId=n.id,this.eachSelectedShape((function(r){var e,o;null===(o=null===(e=r.getControl())||void 0===e?void 0:e.childById(n.id))||void 0===o||o.onPointerStart(t)}))):(r||(i?(this.releaseShapes(),this.selectShapes(i)):(this.releaseShapes(),this.multiselection&&(this._selector.bBox.reset().min.copy(o),this._selector.bBox.max.copy(o),this.trigger("selector:updated"),this._selection=!0))),this.eachSelectedShape((function(n){n.getControl().onPointerStart(t)})))},n.prototype._onPointerMoveInSelectMode=function(t){var n=this;this.eachSelectedShape((function(r){var e,o;r.getControl().onPointerMove(t),null===(o=null===(e=r.getControl())||void 0===e?void 0:e.childById(n._currentNodeId))||void 0===o||o.onPointerMove(t)})),this._selection&&(this._selector.bBox.max.copy(this.getPointer(t)),this.trigger("selector:updated"))},n.prototype._onPointerEndInSelectMode=function(t){var n=this;if(this.eachSelectedShape((function(r){var e,o;r.getControl().onPointerEnd(t),null===(o=null===(e=r.getControl())||void 0===e?void 0:e.childById(n._currentNodeId))||void 0===o||o.onPointerEnd(t)})),this._currentNodeId="",this._selection){var r=this.mapChildren((function(t){var r=n._selector.bBox.toPolygon(),e=t.bBox.toPolygon(t.getWorldMatrix());return!n._selector.bBox.isEmpty()&&r.intersects(e)&&t})).filter((function(t){return!!t}));this.selectShapes(r),this._selector.bBox.reset(),this.trigger("selector:updated")}this._selection=!1},n.prototype._onPointerStartInPanMode=function(t){this._isDragging=!0,this._startVector.subtractPoints(this.getPointer(t),this._pan)},n.prototype._onPointerMoveInPanMode=function(t){if(this._isDragging){var n=this.getPointer(t).subtract(this._startVector);this.zoomTo(this._zoom,n)}},n.prototype._onPointerEndInPanMode=function(t){this._isDragging=!1},n.prototype._onPointerStartInDrawMode=function(t){},n.prototype._onPointerMoveInDrawMode=function(t){},n.prototype._onPointerEndInDrawMode=function(t){},n.prototype.onPointerStart=function(t){this[jt[this.mode]](t)},n.prototype.onPointerMove=function(t){this[Ct[this.mode]](t)},n.prototype.onPointerEnd=function(t){this[At[this.mode]](t)},n.prototype.onWheel=function(t){this.zoomable&&(t.preventDefault(),this.getPointer(t),this.getSize(),this.zoomTo(p(this.zoom*Math.pow(.999,t.deltaY))))},n}(w(v)),Ft=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Bt=function(){return Bt=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},Bt.apply(this,arguments)},Mt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.isShape=!0,n.selectable=!0,n.matrix=new J,n.bBox=new x,n.origin=new P(.5,.5),n._controls={},n.transformProps=["left","top","angle","scaleX","scaleY","skewX","skewY"],n.left=0,n.top=0,n.angle=0,n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n._defs={},n}return Ft(n,t),Object.defineProperty(n.prototype,"fill",{get:function(){return this._fill},set:function(t){var n,r;this._defs.fill&&(null===(n=this.canvas)||void 0===n||n.removeDefs(this._defs.fill)),O.isColor(t)?(this._fill=t,this._defs.fill=null):(t.shape=this,null===(r=this.canvas)||void 0===r||r.addDefs(t),this._fill="url(#".concat(t.id,")"),this._defs.fill=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var n,r;this._defs.stroke&&(null===(n=this.canvas)||void 0===n||n.removeDefs(this._defs.stroke)),O.isColor(t)?(this._stroke=t,this._defs.stroke=null):(t.shape=this,null===(r=this.canvas)||void 0===r||r.addDefs(t),this._stroke="url(#".concat(t.id,")"),this._defs.stroke=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"originX",{get:function(){return this.origin.x},set:function(t){this.origin.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"originY",{get:function(){return this.origin.y},set:function(t){this.origin.y=t},enumerable:!1,configurable:!0}),n.prototype.init=function(t){this.set(t,!0),this.createId(this.tagName),this.addControl("transform",new ht({shape:this})).setControl("transform"),this.updateMatrix(),this.updateBBox(),this.trigger("init",this)},n.prototype.set=function(n,r,e){var o,i;if(void 0===e&&(e=!1),t.prototype.set.call(this,n,r,!0),!n)return this;var s=this.transformProps;if("string"==typeof n)s.includes(n)&&this.updateMatrix(),this.updateOthersWithKeys([n]),e||(this.trigger("set",((o={})[n]=r,o),this),this.canvas&&this.canvas.trigger("shapes:set",((i={})[n]=r,i),this));else{var u=void 0;for(u=0;u<s.length;u++)if(s[u]in n){this.updateMatrix();break}this.updateOthersWithKeys(Object.keys(n)),r||(this.trigger("set",n,this),this.canvas&&this.canvas.trigger("shapes:set",n,this))}return this},n.prototype.getAttrMap=function(){return["fill","stroke","strokeWidth"]},n.prototype.updateOthersWithKeys=function(t){return this},n.prototype.getAttributes=function(){var n=t.prototype.getAttributes.call(this);if(this.isCollection)return n;var r=this.bBox.getSize().multiply(this.origin).multiplyScalar(-1).toString();return Bt(Bt({},n),{transform:"translate(".concat(r,")")})},n.prototype.getWrapperAttributes=function(){var t={id:this.id,transform:this.matrix.toCSS()};return this.className&&(t.className=this.className),t},n.prototype.addControl=function(t,n){return t&&(this._controls[t]=n),this},n.prototype.getControl=function(t){return this._controls[t||this._activeControl]},n.prototype.setControl=function(t){return this._activeControl=t,this.trigger("control:switched",this.getControl(),this),this.canvas&&this.canvas.trigger("shapes:control:switched",this.getControl(),this),this},n.prototype.updateMatrix=function(){return this.matrix.fromOptions(this.get(this.transformProps)),this},n.prototype.updateBBox=function(){return console.warn("updateBBox() must be implemented by subclass."),this},n.prototype.getWorldMatrix=function(){var t=this.parent,n=t.viewportMatrix,r=t.isCanvas;return(new J).copy(r?n:this.parent.getWorldMatrix()).multiply(this.matrix)},n.prototype.getLocalPointer=function(t,n){return this.canvas.getPointer(t).transform(n||this.getWorldMatrix().invert())},n.prototype.toJSON=function(){var n,r,e=this,o=t.prototype.toJSON.call(this),i=this.transformProps.reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{}),s={};for(n in this._defs)(r=this._defs[n])&&(s[n]=r.toJSON());return delete o.transform,Bt(Bt(Bt({},o),i),s)},n}(v),Tt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Dt=function(t){function n(n){var r=t.call(this)||this;return r.tagName="rect",r.width=0,r.height=0,r.init(n),r}return Tt(n,t),n.prototype.getAttrMap=function(){return t.prototype.getAttrMap.call(this).concat(["width","height"])},n.prototype.updateOthersWithKeys=function(t){return(t.includes("width")||t.includes("height"))&&this.updateBBox(),this},n.prototype.updateBBox=function(){return this.bBox.fromSizeAndOrigin(new P(this.width,this.height),this.origin),this},n}(Mt),kt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Nt=function(t){function n(n){var r=t.call(this)||this;return r.tagName="circle",r.r=0,r.cx=0,r.cy=0,r.init(n),r}return kt(n,t),n.prototype.getAttrMap=function(){return t.prototype.getAttrMap.call(this).concat(["r","cx","cy"])},n.prototype.updateOthersWithKeys=function(t){return t.includes("r")&&(this.updateBBox(),this.cx=this.r,this.cy=this.r),this},n.prototype.updateBBox=function(){return this.bBox.fromSizeAndOrigin((new P).addScalar(2*this.r),this.origin),this},n}(Mt),zt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),It=function(t){function n(n){var r=t.call(this)||this;return r.tagName="ellipse",r.rx=0,r.ry=0,r.cx=0,r.cy=0,r.init(n),r}return zt(n,t),n.prototype.getAttrMap=function(){return t.prototype.getAttrMap.call(this).concat(["rx","ry","cx","cy"])},n.prototype.updateOthersWithKeys=function(t){return(t.includes("rx")||t.includes("ry"))&&(this.updateBBox(),this.cx=this.rx,this.cy=this.ry),this},n.prototype.updateBBox=function(){return this.bBox.fromSizeAndOrigin(new P(this.rx,this.ry).multiplyScalar(2),this.origin),this},n}(Mt),Rt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Lt=function(){return Lt=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},Lt.apply(this,arguments)},Wt=function(t){function n(n){var r=t.call(this)||this;return r.tagName="path",r.path=new Z,r.init(n),r.addControl("path",new dt({shape:r,path:r.path})),r}return Rt(n,t),n.prototype.getAttributes=function(){var n=t.prototype.getAttributes.call(this);return Lt(Lt({},n),{d:this.path.toString()})},n.prototype.updateOthersWithKeys=function(t){return t.includes("d")&&(this.path.fromString(this.d).adjust(),this.updateBBox()),this},n.prototype.updateBBox=function(){return this.bBox.fromSizeAndOrigin(this.path.updateBBox().getBBox().getSize(),this.origin),this},n}(Mt),Xt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),$t=function(){return $t=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},$t.apply(this,arguments)},qt=function(t){function n(n){var r=t.call(this)||this;return r.tagName="polyline",r.path=new Z,r.init(n),r}return Xt(n,t),n.prototype.getAttributes=function(){var n=t.prototype.getAttributes.call(this);return $t($t({},n),{points:this.path.toNumbers()})},n.prototype.updateOthersWithKeys=function(t){return t.includes("points")&&(this.path.fromNumbers(this.points).adjust(),this.updateBBox()),this},n.prototype.updateBBox=function(){return this.bBox.fromSizeAndOrigin(this.path.updateBBox().getBBox().getSize(),this.origin),this},n}(Mt),Vt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Yt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.tagName="polygon",n}return Vt(n,t),n}(qt),Ht=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Ut=document.createElement("canvas").getContext("2d"),Gt=function(t){function n(n){var r=t.call(this)||this;return r.tagName="text",r.text="",r.fontFamily="Arial",r.fontSize=40,r.fontWeight="normal",r.x=0,r.y=40,r.init(n),r.addControl("text",new vt({shape:r})),r}return Ht(n,t),n.prototype.getAttrMap=function(){return t.prototype.getAttrMap.call(this).concat(["x","y","fontFamily","fontSize"])},n.prototype.updateOthersWithKeys=function(t){return(t.includes("text")||t.includes("fontFamily")||t.includes("fontSize"))&&this.updateBBox(),t.includes("fontSize")&&(this.y=this.fontSize),this},n.prototype.updateBBox=function(){return this.bBox.fromSizeAndOrigin(this.getTextSize(),this.origin),this},n.prototype.getTextSize=function(){Ut.font="".concat(this.fontSize,"px ").concat(this.fontFamily);var t=Ut.measureText(this.text),n=t.width,r=t.fontBoundingBoxAscent,e=t.fontBoundingBoxDescent;return new P(n,r+e)},n}(Mt),Qt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Kt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.tagName="textPath",n}return Qt(n,t),n}(Gt),Zt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Jt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Zt(n,t),n.prototype.fromURL=function(t){return this},n.prototype.fromString=function(t){return this},n.prototype.onLoad=function(t){return this.on("loaded",t)},n.prototype.onError=function(t){return this},n}(s),tn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),nn=(function(t){tn((function(){return null!==t&&t.apply(this,arguments)||this}),t)}(Jt),function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}()),rn=(function(t){nn((function(){return null!==t&&t.apply(this,arguments)||this}),t)}(Jt),function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}()),en=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return rn(n,t),n.prototype.fromURL=function(t){var n=this,r=new Image;return r.src=t,r.onload=function(){n.trigger("loaded",r)},this},n}(Jt),on=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),sn=function(t){function n(n){var r=t.call(this)||this;return r.tagName="image",r.href="",r.loader=new en,r.init(n),r.setImage(r.href),r}return on(n,t),n.prototype.setImage=function(t){var n=this;return this.loader.fromURL(t).onLoad((function(t){var r=t.width,e=t.height;return n.set({width:r,height:e})})),this},n.prototype.getAttrMap=function(){return t.prototype.getAttrMap.call(this).concat(["href"])},n}(Dt),un=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),an=function(t){function n(n){var r=t.call(this)||this;return r.tagName="g",r.init(n),r.updateBBox=r.updateBBox.bind(r),r}return un(n,t),n.prototype.updateBBox=function(){var t=this.mapChildren((function(t){return t.bBox.getLineEdges(t.matrix)})).flat();return this.bBox.fromPoints(t),this.origin.copy(this.bBox.getOrigin()),this},n.prototype.add=function(n,r){var e=this;return t.prototype.add.call(this,n,r),(n=Array.isArray(n)?n:[n]).forEach((function(t){return t.on("set",e.updateBBox)})),this.updateBBox(),this},n.prototype.remove=function(n,r){var e=this;return t.prototype.remove.call(this,n,r),n.forEach((function(t){return t.off("set",e.updateBBox)})),this.updateBBox(),this},n}(w(Mt)),cn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),pn=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.isDefinition=!0,n}return cn(n,t),n.prototype.init=function(t){this.set(t,!0),this.createId(this.tagName),this.trigger("init",this)},n.prototype.getAttrMap=function(){return["id"]},n}(w(v)),ln=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),fn=(function(t){ln((function(n){var r=t.call(this)||this;return r.tagName="clipPath",r.init(n),r}),t)}(pn),function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}()),hn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return fn(n,t),Object.defineProperty(n.prototype,"colorStops",{get:function(){return this.getChildren()},set:function(t){var n=t.map((function(t){return new vn(t)}));this.setChildren(n,!0)},enumerable:!1,configurable:!0}),n}(pn),yn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),dn=(function(t){yn((function(n){var r=t.call(this)||this;return r.tagName="linearGradient",r.init(n),r}),t)}(hn),function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}()),gn=(function(t){dn((function(n){var r=t.call(this)||this;return r.tagName="radialGradient",r.init(n),r}),t)}(hn),function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}()),vn=function(t){function n(n){var r=t.call(this)||this;return r.tagName="stop",r.offset=0,r.stopColor="",r.stopOpacity=1,r.set(n),r.createId("stop"),r}return gn(n,t),n.prototype.getAttrMap=function(){return["offset","stopColor","stopOpacity"]},n}(v),_n=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),mn=(function(t){_n((function(n){var r=t.call(this)||this;return r.tagName="pattern",r.init(n),r}),t)}(pn),function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}()),bn=(function(t){mn((function(){return null!==t&&t.apply(this,arguments)||this}),t)}(m(s)),function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}()),wn=(function(t){bn((function(){return null!==t&&t.apply(this,arguments)||this}),t)}(m(s)),function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}()),xn=(function(t){wn((function(){return null!==t&&t.apply(this,arguments)||this}),t)}(m(s)),function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}()),On=(function(t){xn((function(){return null!==t&&t.apply(this,arguments)||this}),t)}(s),(0,o.createContext)({})),Pn=(0,o.createContext)({}),Sn=function(t){var r=t.children,e=function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(t);o<e.length;o++)n.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(r[e[o]]=t[e[o]])}return r}(t,["children"]),i=(0,o.useMemo)((function(){return new Et(e)}),[]);return(0,n.jsx)(On.Provider,{value:i,children:r})},jn=function(){return(0,o.useContext)(On)},Cn=function(){return(0,o.useContext)(Pn)},An=function(t,n,r){void 0===r&&(r="all");var e=(0,o.useRef)(null);e.current||(e.current=t(n));var i=(0,o.useState)(e.current),s=i[0],u=i[1],a=(0,o.useCallback)((function(){var r=t(n);h(e.current,r)||(u(r),e.current=r)}),[]);return(0,o.useEffect)((function(){return n.on(r,a),function(){n.off(r,a)}}),[]),s},En=function(t,n){var r=jn();return An(t,r,n)},Fn=function(t,n){var r=Cn();return An(t,r,n)},Bn=function(t,n,r){return An(n,t,r)},Mn=function(){return Mn=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},Mn.apply(this,arguments)},Tn=function(t){var r=t.children,e=t.canvas,i=t.props,s=(0,o.useState)(e.getAttributes()),u=s[0],a=s[1],c=(0,o.useCallback)((function(){var t;a(e.getAttributes()),null===(t=i.onChange)||void 0===t||t.call(i,e)}),[]);return(0,o.useEffect)((function(){return e.on("set",c),setTimeout((function(){return e.set(i)}),0),function(){e.off("set",c)}}),[]),(0,o.useEffect)((function(){e.set(i)}),[i]),(0,n.jsx)("svg",Mn({},u,{children:r}))},Dn=function(t){var r=t.children,e=function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(t);o<e.length;o++)n.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(r[e[o]]=t[e[o]])}return r}(t,["children"]),o=jn();return(0,n.jsx)(Pn.Provider,{value:o,children:(0,n.jsx)(Tn,{canvas:o,props:e,children:r})})},kn=function(){return kn=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},kn.apply(this,arguments)},Nn=function(t){var r=t.TagName,e=t.def,o=Bn(e,(function(t){var n;return{attributes:t.getAttributes(),isCollection:t.isCollection,mapDefs:null===(n=t.mapChildren)||void 0===n?void 0:n.bind(t)}}),"set"),i=o.attributes,s=o.isCollection,u=o.mapDefs;return(0,n.jsx)(r,kn({},i,{children:s&&u((function(t){return(0,n.jsx)(Nn,{TagName:t.get("tagName"),def:t},t.id)}))}))},zn=function(){var t=jn(),r=(0,o.useState)(t.getDefs()),e=r[0],i=r[1],s=(0,o.useCallback)((function(){i(function(t,n,r){if(r||2===arguments.length)for(var e,o=0,i=n.length;o<i;o++)!e&&o in n||(e||(e=Array.prototype.slice.call(n,0,o)),e[o]=n[o]);return t.concat(e||Array.prototype.slice.call(n))}([],t.getDefs(),!0))}),[]);return(0,o.useEffect)((function(){return t.on("defs:added",s),function(){t.off("defs:added",s)}}),[]),e.length?(0,n.jsx)("defs",{children:e.map((function(t){return(0,n.jsx)(Nn,{TagName:t.get("tagName"),def:t},t.id)}))}):null},In=function(){return In=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},In.apply(this,arguments)},Rn=function(t){return function(r){return(0,n.jsx)(Nn,In({TagName:t},r))}},Ln=Rn("linearGradient"),Wn=Rn("radialGradient"),Xn=Rn("pattern"),$n=function(){return $n=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},$n.apply(this,arguments)},qn=function(t){var r=t.shape,e=t.TagName,i=t.props,s=t.children,u=(0,o.useState)(r.getWrapperAttributes()),a=u[0],c=u[1],p=(0,o.useState)(r.getAttributes()),l=p[0],f=p[1],h=(0,o.useCallback)((function(){var t;c(r.getWrapperAttributes()),f(r.getAttributes()),null===(t=i.onChange)||void 0===t||t.call(i,r)}),[i.onChange]);return(0,o.useEffect)((function(){return r.on("set",h),function(){r.off("set",h)}}),[]),(0,o.useEffect)((function(){r.set(i)}),[i]),(0,n.jsx)("g",$n({},a,{children:(0,n.jsx)(e,$n({},l,{children:s}))}))},Vn=function(t){var r=t.children,e=function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(t);o<e.length;o++)n.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(r[e[o]]=t[e[o]])}return r}(t,["children"]),i=Cn(),s=(0,o.useMemo)((function(){return new an}),[]);return(0,o.useEffect)((function(){return i.add(s),function(){i.remove(s)}}),[]),(0,n.jsx)(Pn.Provider,{value:s,children:(0,n.jsx)(qn,{TagName:"g",shape:s,props:e,children:r})})},Yn={svg:Et,g:an,rect:Dt,circle:Nt,ellipse:It,path:Wt,polygon:Yt,polyline:qt,image:sn,text:Gt,"text-path":Kt},Hn=function(t,r){return function(e){var i=e.children,s=function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(t);o<e.length;o++)n.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(r[e[o]]=t[e[o]])}return r}(e,["children"]),u=Cn(),a=(0,o.useMemo)((function(){return new(0,Yn[r])(s)}),[]);return(0,o.useEffect)((function(){return u.add(a),function(){u.remove(a)}}),[]),(0,n.jsx)(t,{TagName:r,shape:a,props:s,children:i})}},Un=Hn(qn,"rect"),Gn=Hn(qn,"circle"),Qn=Hn(qn,"ellipse"),Kn=Hn(qn,"path"),Zn=Hn(qn,"polygon"),Jn=Hn(qn,"polyline"),tr=Hn(qn,"image"),nr=function(){return nr=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},nr.apply(this,arguments)},rr=Hn((function(t){t.children;var r=function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(t);o<e.length;o++)n.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(r[e[o]]=t[e[o]])}return r}(t,["children"]);return(0,n.jsx)(qn,nr({},r,{children:r.props.text}))}),"text"),er=function(){return er=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},er.apply(this,arguments)},or=function(t){var r=t.tagName,e=t.children,o=function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(t);o<e.length;o++)n.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(r[e[o]]=t[e[o]])}return r}(t,["tagName","children"]),i="g"===r?Vn:Hn(qn,r);return(0,n.jsx)(i,er({},o,{children:null==e?void 0:e.map((function(t){return(0,n.jsx)(or,er({},t),t.id)}))}))},ir=function(t){var r=t.json;return(void 0===r?[]:r).map((function(t){return(0,n.jsx)(or,er({},t),t.id)}))},sr=function(t){var r=t.className,e=void 0===r?"grafik-wrapper":r,i=t.children,s=En((function(t){return{style:t.get(["width","height"]),setResponsiveSize:t.setResponsiveSize.bind(t)}}),"set"),u=s.style,a=s.setResponsiveSize,c=(0,o.useRef)(null),p=(0,o.useCallback)((function(){if(null==c?void 0:c.current){var t=c.current.parentElement,n=t.clientWidth,r=t.clientHeight;a(n,r)}}),[]);return(0,o.useEffect)((function(){return window.addEventListener("resize",p),function(){window.removeEventListener("resize",p)}}),[]),(0,n.jsx)("div",{ref:c,className:e,style:u,children:i})},ur=function(t){var r=t.className,e=void 0===r?"grafik-interactive":r,i=t.children,s=En((function(t){return{shapes:t.getSelectedShapes(),onPointerStart:t.onPointerStart.bind(t),onPointerMove:t.onPointerMove.bind(t),onPointerEnd:t.onPointerEnd.bind(t),onWheel:t.onWheel.bind(t)}}),"shapes:selection:updated"),u=s.shapes,a=s.onPointerStart,c=s.onPointerMove,p=s.onPointerEnd,l=s.onWheel,f=(0,o.useRef)(),h=(0,o.useCallback)((function(t){t.preventDefault(),a(t)}),[]),y=(0,o.useCallback)((function(t){c(t)}),[]),d=(0,o.useCallback)((function(t){p(t)}),[]),g=(0,o.useCallback)((function(t){l(t)}),[]);return(0,o.useEffect)((function(){var t;return null===(t=f.current)||void 0===t||t.addEventListener("wheel",g),function(){var t;null===(t=f.current)||void 0===t||t.removeEventListener("wheel",g)}}),[]),(0,n.jsxs)("div",{ref:f,className:e,onMouseDown:h,onMouseMove:y,onMouseUp:d,onMouseLeave:d,children:[u.map((function(t){return(0,n.jsx)(lr,{control:t.getControl()},t.id)})),i]})},ar=function(){return ar=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},ar.apply(this,arguments)},cr=function(){var t=En((function(t){return{style:t.getSelector().getStyle(),attributes:t.getSelector().getAttributes(),multiselection:t.multiselection}}),"selector:updated"),r=t.style,e=t.attributes;return t.multiselection?(0,n.jsx)("div",ar({style:r},e)):null},pr=function(){return pr=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},pr.apply(this,arguments)},lr=function(t){var r=t.control,e=r.get("tagName"),i=(0,o.useState)(r.getAttributes()),s=i[0],u=i[1],a=(0,o.useState)(r.getStyle()),c=a[0],p=a[1],l=(0,o.useCallback)((function(){u(r.getAttributes()),p(r.getStyle())}),[]);return(0,o.useEffect)((function(){return r.shape.on("set",l),r.shape.canvas.on("set",l),function(){r.shape.off("set",l),r.shape.canvas.off("set",l)}}),[]),(0,n.jsx)(e,pr({},s,{style:c,children:r.mapChildren((function(t){return(0,n.jsx)(hr,{node:t},t.id)}))}))},fr=function(){return fr=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},fr.apply(this,arguments)},hr=function(t){var r=t.node,e=r.get("tagName");return(0,n.jsx)(e,fr({},r.getAttributes(),{style:r.getStyle()}))}})(),e})()));