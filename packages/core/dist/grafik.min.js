!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.grafik=n():t.grafik=n()}(window,(()=>(()=>{"use strict";var t={d:(n,r)=>{for(var e in r)t.o(r,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:r[e]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{AngleControlNode:()=>Ft,Animation:()=>Yt,ArcCurve:()=>H,BBox:()=>B,Canvas:()=>bn,Circle:()=>Zt,ClipPath:()=>Pn,CloseCurve:()=>nt,Color:()=>M,ColorStop:()=>Mn,Control:()=>gt,ControlNode:()=>vt,CubicBezierCurve:()=>K,Curve:()=>z,CurvePath:()=>at,Definition:()=>xn,Element:()=>A,Ellipse:()=>$t,Exporter:()=>Hn,Gradient:()=>An,GradientControl:()=>St,Group:()=>mn,HorizontalLineCurve:()=>q,Image:()=>dn,Importer:()=>zn,JSONImporter:()=>Vn,Keyframe:()=>Lt,LineCurve:()=>V,LinearGradient:()=>jn,LottieExporter:()=>er,LottieImporter:()=>qn,Matrix:()=>st,MoveCurve:()=>N,Observable:()=>o,OriginControlNode:()=>Bt,PIBY180:()=>i,Path:()=>rn,PathControl:()=>Ot,Pattern:()=>Dn,Point:()=>T,Polygon:()=>cn,Polyline:()=>an,QuadraticBezierCurve:()=>R,RadialGradient:()=>En,RasterExporter:()=>hr,ReactExporter:()=>ir,Rect:()=>Kt,SVGCSSExporter:()=>$n,SVGExporter:()=>Rn,SVGImporter:()=>Xn,SVGJSExporter:()=>nr,Sanitizer:()=>b,ScaleControlNode:()=>Tt,Selector:()=>ft,Shape:()=>Rt,SmoothCubicBezierCurve:()=>$,SmoothQuadraticBezierCurve:()=>Z,Text:()=>hn,TextControl:()=>Ct,TextPath:()=>fn,Timeline:()=>Nt,Track:()=>Wt,TransformControl:()=>wt,VerticalLineCurve:()=>X,VueExporter:()=>ur,camelize:()=>y,clamp:()=>s,deg2Rad:()=>u,easings:()=>It,isEqual:()=>d,kebabize:()=>f,omitBy:()=>_,parsePath:()=>v,rad2Deg:()=>p,randInt:()=>h,toFixed:()=>c,unique:()=>g,uniqueId:()=>l});var r,e=function(t,n,r){if(r||2===arguments.length)for(var e,o=0,i=n.length;o<i;o++)!e&&o in n||(e||(e=Array.prototype.slice.call(n,0,o)),e[o]=n[o]);return t.concat(e||Array.prototype.slice.call(n))},o=function(){function t(){this._listeners={}}return t.prototype.on=function(t,n){var r=this;if("object"==typeof t)for(var e in t)this.on(e,t[e]);else"string"==typeof t&&-1!==t.indexOf(" ")?t.split(" ").forEach((function(t){return r.on(t,n)})):(this._listeners[t]||(this._listeners[t]=[]),-1===this._listeners[t].indexOf(n)&&this._listeners[t].push(n));return this},t.prototype.once=function(){return this},t.prototype.off=function(t,n){if("object"==typeof t)for(var r in t)this.off(r,t[r]);else{var e=this._listeners[t];if(e){var o=e.indexOf(n);-1!==o&&e.splice(o,1)}}return this},t.prototype.trigger=function(t){for(var n,r,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var a=this._listeners[t],s=this._listeners.all;if(a)for(var c=0;c<a.length;c++)(n=a[c]).call.apply(n,e(e([this],o,!1),[t],!1));if(s)for(c=0;c<s.length;c++)(r=s[c]).call.apply(r,e(e([this],o,!1),[t],!1));return this},t}(),i=Math.PI/180,a=function(t,n,r){if(r||2===arguments.length)for(var e,o=0,i=n.length;o<i;o++)!e&&o in n||(e||(e=Array.prototype.slice.call(n,0,o)),e[o]=n[o]);return t.concat(e||Array.prototype.slice.call(n))},s=function(t,n,r){return Math.min(Math.max(t,n),r)},c=function(t,n){void 0===n&&(n=2);var r=parseFloat(t)||0;return Math.round(r*Math.pow(10,n))/Math.pow(10,n)||0},u=function(t){return t*i},p=function(t){return t/i},h=function(t,n){return Math.floor(Math.random()*(n-t+1))+t},l=function(t){var n,r=t?t+"-":"",e="";for(n=0;n<12;n++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[h(0,61)];return r+e},f=function(t){return t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())}))},y=function(t){return t.replace(/-([a-z])/g,(function(t,n){return n.toUpperCase()}))},d=function(t,n,r){if(void 0===r&&(r=new Set),typeof t!=typeof n)return!1;if("object"!=typeof t||null===t||null===n)return t===n;if(t===n)return!0;if(r.has(t)||r.has(n))return!1;if(r.add(t),r.add(n),Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(!d(t[e],n[e],r))return!1;return!0}if("function"==typeof t&&"function"==typeof n)return t.toString()===n.toString();if("object"==typeof t&&"object"==typeof n){var o=Object.keys(t),i=Object.keys(n);if(o.length!==i.length)return!1;for(var a=0,s=o;a<s.length;a++){var c=s[a];if(!d(t[c],n[c],r))return!1}return!0}return!1},g=function(t){return Array.from(new Set(t))},_=function(t,n){var r={};for(var e in t)n(t[e],e,t)||(r[e]=t[e]);return r},m={M:2,m:2,L:2,l:2,H:1,h:1,V:1,v:1,C:6,c:6,S:4,s:4,Q:4,q:4,T:2,t:2,A:7,a:7,Z:0,z:0},v=function(t){var n=[];return(t.match(/([MmLlHhVvCcSsQqTtAaZz])([^MmLlHhVvCcSsQqTtAaZz]+)?/g)||[]).forEach((function(t,r,e){var o=(t=t.trim()).replace(/[^MmLlHhVvCcSsQqTtAaZz]/g,""),i=(t.match(/-?\d+(\.\d+)?/g)||[]).map((function(t){return c(t)})),s=m[o];i.length===s?n.push(a([o],i,!0)):function(t,n){for(var r=[],e=0;e<t.length;e+=n)r.push(t.slice(e,e+n));return r}(i,s).forEach((function(t){n.push(a([o],t,!0))}))})),n},b=function(){function t(){this._types={left:"number",top:"number",width:"number",height:"number"}}return t.prototype.sanitize=function(t,n){var r=this._types[t];if(!r)return n;var e=this["_"+r];return e?e(n):n},t.prototype._number=function(t){return c(t)},t}(),w=(r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},r(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),x=new b;function O(t){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return w(n,t),n.prototype.set=function(t,n,r){var e;if(void 0===r&&(r=!1),"string"==typeof t)this._set(t,n),r||this.trigger("set",((e={})[t]=n,e),this);else{for(var o in t)this._set(o,t[o]);n||this.trigger("set",t,this)}return this},n.prototype._set=function(t,n){"function"!=typeof this[t]&&void 0!==n&&(this[t]=x.sanitize(t,n))},n.prototype.get=function(t){var n=this;return Array.isArray(t)?t.reduce((function(t,r){return t[r]=n[r],t}),{}):this[t]},n}(t)}var P=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),C=function(){return C=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},C.apply(this,arguments)},A=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.id="",n.name="",n.className="",n}return P(n,t),n.prototype.getAttrMap=function(){return["className"]},n.prototype.getAttributes=function(t){var n,r=this;return void 0===t&&(t=!1),this.getAttrMap().reduce((function(e,o){return void 0!==r[o]&&(n=r[o],n=Array.isArray(n)?n.join(" "):n,e[t?f(o):o]=n),e}),{})},n.prototype.getStyle=function(){return{}},n.prototype.createId=function(t){this.id||(this.id=l(t))},n.prototype.addClass=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.className.split(" ").filter((function(t){return t})),e=t.filter((function(t){return t&&!r.includes(t)}));return this.set("className",r.concat(e).join(" ")),this},n.prototype.removeClass=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.className.split(" ");return this.set("className",r.filter((function(n){return!t.includes(n)})).join(" ")),this},n.prototype.toJSON=function(){var t=this,n=t.id,r=t.name,e=t.tagName,o=C({id:n,name:r,tagName:e},this.getAttributes()),i=this.isCollection&&this.mapChildren((function(t){return t.toJSON()}));return i&&(o.children=i),o},n}(O(o)),S=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();function j(t){return function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.isCollection=!0,n.children=[],n}return S(n,t),Object.defineProperty(n.prototype,"childrenLength",{get:function(){return this.children.length},enumerable:!1,configurable:!0}),n.prototype.setChildren=function(t,n){return void 0===n&&(n=!1),this.reset().add(t,n)},n.prototype.getChildren=function(){return this.children},n.prototype.add=function(t,n){var r=this;return void 0===n&&(n=!1),(t=Array.isArray(t)?t:[t]).forEach((function(t){r.children.includes(t)||(r.children.push(t),t.set("parent",r,!0))})),n||this.trigger("added",t),this},n.prototype.remove=function(t,n){var r,e=this;return void 0===n&&(n=!1),(t=Array.isArray(t)?t:[t]).forEach((function(t){-1!==(r=e.children.indexOf(t))&&e.children.splice(r,1)})),n||this.trigger("removed",t),this},n.prototype.reset=function(){return this.children=[],this},n.prototype.eachChild=function(t){return this.children.forEach(t),this},n.prototype.mapChildren=function(t){return this.children.map(t)},n.prototype.reduceChildren=function(t,n){return this.children.reduce(t,n)},n.prototype.childAt=function(t){return this.children[t]},n.prototype.firstChild=function(){return this.children[0]},n.prototype.lastChild=function(){return this.children[this.childrenLength-1]},n.prototype.childById=function(t){return this.children.find((function(n){return n.id===t}))},n.prototype.childByName=function(t){return this.children.find((function(n){return n.name===t}))},n.prototype.childByIdDeep=function(t){var n=this.childById(t);return n||(this.eachChild((function(r){if(r.isCollection){var e=r.childByIdDeep(t);e&&(n=e)}})),n)},n.prototype.childByNameDeep=function(t){var n=this.childByName(t);return n||(this.eachChild((function(r){if(r.isCollection){var e=r.childByNameDeep(t);e&&(n=e)}})),n)},n.prototype.moveChildTo=function(t,n){var r=this.children.indexOf(t);return-1!==r&&(this.children.splice(r,1),this.children.splice(n,0,t),this.trigger("sorted",t,this.children)),this},n.prototype.moveChildUp=function(t){var n=this.children.indexOf(t);return this.moveChildTo(t,n+1)},n.prototype.moveChildDown=function(t){var n=this.children.indexOf(t);return this.moveChildTo(t,n-1)},n}(t)}var F=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();function E(t){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.add=function(t,n){var r=this;return void 0===n&&(n=!1),(t=Array.isArray(t)?t:[t]).forEach((function(t){var e;if(!r.children.includes(t)){if(r.children.push(t),t.set("parent",r,!0),r.isCanvas){var o=function(t){t.set("canvas",r,!0),r.on("set",(function(n){return t.trigger("canvas:set",n)})),r.getAnimation().add(t.getAnimation())};o(t),t.isCollection&&t.eachChild(o)}var i,a,s=t.get("_defs")||{},c=[];for(i in s)(null==(a=s[i])?void 0:a.isDefinition)&&c.push(a);c.length&&(null===(e=t.get("canvas"))||void 0===e||e.addDefs(c)),n||t.trigger("addedto",r)}})),n||this.trigger("added",t),this},n.prototype.findChildrenByPointer=function(t){return this.mapChildren((function(n){return n.toPolygon().containsPoint(t)&&n})).filter((function(t){return null==t?void 0:t.selectable}))},n.prototype.findLastChildByPointer=function(t){var n=this.findChildrenByPointer(t);return n[n.length-1]},n}(j(t))}var B=function(){function t(t,n){void 0===t&&(t=new T),void 0===n&&(n=new T),this.min=t,this.max=n}return t.prototype.fromSizeAndOrigin=function(t,n){void 0===n&&(n=new T(.5,.5));var r=t.clone().multiply(n).multiplyScalar(-1);return this.min.copy(r),this.max.copy(t.clone().add(r)),this},t.prototype.fromPoints=function(t){if(!t.length)return this;this.flip();for(var n=0;n<t.length;n++)this.expandByPoint(t[n]);return this},t.prototype.expandByPoint=function(t){return this.min.min(t),this.max.max(t),this},t.prototype.getSize=function(){return(new T).subtractPoints(this.max,this.min)},t.prototype.getOrigin=function(){return this.isEmpty()?new T(.5,.5):(new T).subtract(this.min).divide(this.getSize())},t.prototype.getLineEdges=function(t){var n=this.min.x,r=this.min.y,e=this.max.x,o=this.max.y,i=new T(n,o),a=new T(e,o),s=new T(n,r),c=new T(e,r);return t&&(i=i.transform(t),a=a.transform(t),s=s.transform(t),c=c.transform(t)),[i,a,c,s]},t.prototype.toPolygon=function(t){var n=this.getLineEdges(t),r=n[0],e=n[1],o=n[2],i=n[3];return new at([new N(r),new V(r,e),new V(e,o),new V(o,i),new V(i,r)])},t.prototype.contains=function(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y},t.prototype.intersects=function(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y},t.prototype.transform=function(t){var n=t.tx,r=t.ty,e=this.getLineEdges(t.clone().translate(0,0));return this.fromPoints(e).translate(n,r)},t.prototype.translate=function(t,n){var r=new T(t,n);return this.min.add(r),this.max.add(r),this},t.prototype.reset=function(){return this.min.set(0,0),this.max.set(0,0),this},t.prototype.flip=function(){return this.min.set(1/0,1/0),this.max.set(-1/0,-1/0),this},t.prototype.isEqual=function(t){return this.min.isEqual(t.min)&&this.max.isEqual(t.max)},t.prototype.isEmpty=function(){return this.min.isEqual(this.max)},t.prototype.intersect=function(t){return this.min.max(t.min),this.max.min(t.max),this},t.prototype.union=function(t){return this.min.min(t.min),this.max.max(t.max),this},t.prototype.copy=function(t){return this.min.copy(t.min),this.max.copy(t.max),this},t.prototype.clone=function(){return(new t).copy(this)},t}(),M=function(){function t(n){this.r=0,this.g=0,this.b=0,this.a=1,t.isColorName(n)?this.fromColorName(n):t.isHEX(n)?this.fromHEX(n):t.isRGB(n)?this.fromRGB(n):t.isHSL(n)?this.fromHSL(n):Array.isArray(n)?this.fromArray(n):this.fromObject(n)}return t.prototype.fromColorName=function(n){return this.fromHEX(t.colorNameMap[n]),this},t.prototype.fromHEX=function(t){var n=t.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);return n&&(this.r=parseInt(n[1],16),this.g=parseInt(n[2],16),this.b=parseInt(n[3],16),this.a=void 0!==n[4]?parseFloat(n[4]):1),this},t.prototype.fromRGB=function(t){var n=t.match(/^rgba?\(\s*(\d{1,3}(?:\.\d+)?)\s*,\s*(\d{1,3}(?:\.\d+)?)\s*,\s*(\d{1,3}(?:\.\d+)?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i);return n&&(this.r=parseInt(n[1],10),this.g=parseInt(n[2],10),this.b=parseInt(n[3],10),this.a=void 0!==n[4]?parseFloat(n[4]):1),this},t.prototype.fromHSL=function(t){return this},t.prototype.fromArray=function(t){return this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3],this},t.prototype.fromObject=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.toHEX=function(){var t=this.r.toString(16),n=this.g.toString(16),r=this.b.toString(16);return t=1===t.length?"0"+t:t,n=1===n.length?"0"+n:n,r=1===r.length?"0"+r:r,"#"+t.toUpperCase()+n.toUpperCase()+r.toUpperCase()},t.prototype.toHEXA=function(){var t=parseInt(255*this.a).toString(16);return t=1===t.length?"0"+t:t,this.toHEX()+t.toUpperCase()},t.prototype.toRGB=function(){var t=this,n=t.r,r=t.g,e=t.b;return"rgb(".concat(n,", ").concat(r,", ").concat(e,")")},t.prototype.toRGBA=function(){var t=this,n=t.r,r=t.g,e=t.b,o=t.a;return"rgba(".concat(n,", ").concat(r,", ").concat(e,", ").concat(o,")")},t.prototype.toHSL=function(){return""},t.prototype.toArray=function(){var t=this;return[t.r,t.g,t.b,t.a]},t.prototype.toObject=function(){var t=this;return{r:t.r,g:t.g,b:t.b,a:t.a}},t.prototype.copy=function(t){return this.fromObject(t)},t.prototype.clone=function(){return new t(this)},t.isColor=function(n){return t.isHEX(n)||t.isRGB(n)||t.isHSL(n)||t.isColorName(n)},t.isColorName=function(n){return t.isHEX(t.colorNameMap[n])},t.isHEX=function(t){if("string"!=typeof t)return!1;var n=/^(#?)([a-f0-9]{3}){1,2}$/i.test(t),r=/^(#?)([a-f0-9]{8})$/i.test(t);return n||r},t.isRGB=function(t){var n=/^(rgb)[(]\s*([\d.]+\s*)\s*,\s*([\d.]+\s*)\s*,\s*([\d.]+\s*)\s*[)]$/.test(t),r=/^(rgba)[(]\s*([\d.]+\s*)\s*,\s*([\d.]+\s*)\s*,\s*([\d.]+\s*)\s*,\s*([\d.]+\s*)\s*[)]$/.test(t);return n||r},t.isHSL=function(t){return!1},t.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32",none:"#00000000",transparent:"#00000000"},t}(),T=function(){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.set(t,n)}return t.prototype.set=function(t,n){return this.x=t,this.y=n,this},t.prototype.setX=function(t){return this.x=t,this},t.prototype.setY=function(t){return this.y=t,this},t.prototype.fromObject=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.toObject=function(){return{x:this.x,y:this.y}},t.prototype.fromString=function(t,n){void 0===n&&(n=", ");var r=t.split(n).map((function(t){return parseFloat(t)}));return this.x=r[0],this.y=r[1],this},t.prototype.toString=function(t){return void 0===t&&(t=" "),[this.x,this.y].join(t)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},t.prototype.addPoints=function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.subtractScalar=function(t){return this.x-=t,this.y-=t,this},t.prototype.subtractPoints=function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this},t.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},t.prototype.multiplyPoints=function(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this},t.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.divideScalar=function(t){return this.x/=t,this.y/=t,this},t.prototype.dividePoints=function(t,n){return this.x=t.x/n.x,this.y=t.y/n.y,this},t.prototype.lerp=function(t,n){return n=s(n,0,1),this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this},t.prototype.lerpPoints=function(t,n,r){return r=s(r,0,1),this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this},t.prototype.bilerp=function(t,n){var r=s(n.x,0,1),e=s(n.y,0,1);return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*e,this},t.prototype.bilerpPoints=function(t,n,r){var e=s(r.x,0,1),o=s(r.y,0,1);return this.x=t.x+(n.x-t.x)*e,this.y=t.y+(n.y-t.y)*o,this},t.prototype.rotate=function(t,n){var r=u(n),e=Math.cos(r),o=Math.sin(r),i=this.x-t.x,a=this.y-t.y;return this.x=i*e-a*o+t.x,this.y=i*o+a*e+t.y,this},t.prototype.angleTo=function(t){return p(Math.atan2(t.y-this.y,t.x-this.x))},t.prototype.distanceTo=function(t){var n=this.x-t.x,r=this.y-t.y;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.transform=function(t){var n=this.x,r=this.y,e=t.a,o=t.b,i=t.c,a=t.d,s=t.tx,c=t.ty;return this.x=e*n+i*r+s,this.y=o*n+a*r+c,this},t.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},t.prototype.minPoints=function(t,n){return this.x=Math.min(t.x,n.x),this.y=Math.min(t.y,n.y),this},t.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},t.prototype.maxPoints=function(t,n){return this.x=Math.max(t.x,n.x),this.y=Math.max(t.y,n.y),this},t.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.clamp=function(t,n){return this.x=s(this.x,t.x,n.x),this.y=s(this.y,t.y,n.y),this},t.prototype.isEqual=function(t){return this.x===t.x&&this.y===t.y},t.prototype.copy=function(t){return this.set(t.x,t.y),this},t.prototype.clone=function(){return(new t).copy(this)},t}(),D=new T,z=function(){function t(){this.command="",this._bBox=new B}return t.prototype.getPoint=function(t){return console.warn("getPoint() must be implemented by subclass."),new T},t.prototype.getPoints=function(t){void 0===t&&(t=10);for(var n=[],r=0;r<=t;r++)n.push(this.getPoint(r/t));return n},t.prototype.updateBBox=function(){return this._bBox.fromPoints(this.getPoints()),this},t.prototype.getBBox=function(){return this._bBox},t.prototype.fromArray=function(t,n,r){var e,o,i,a=t.length,s=t[0]===t[0].toLowerCase(),c=this._getLastCurveEndPoint(r,n);for(this.p0&&("M"===this.command?this.p0.set(t[1],t[2]):this.p0.copy(c)),o=0,i=1;o<a-1;o+=2,i++)(e=this["p"+i])&&(e.set(t[o+1],t[o+2]),s&&e.add(c));return this},t.prototype.toString=function(){for(var t=[],n="M"===this.command?0:1;this["p"+n];)t.push(this["p"+n].toString()),n++;return this.command+" "+t.join(" ")},t.prototype.translate=function(t,n){for(var r=0;this["p"+r];)this["p"+r].add(D.set(t,n)),r++;return this},t.prototype._getLastCurveEndPoint=function(t,n){for(var r,e=0,o=0,i=!1,a=!1,s=n;2===t[s--].length;)switch((r=t[s])[0]){case"H":case"h":i||(e=r[1],i=!0);break;case"V":case"v":a||(o=r[1],a=!0);break;default:i||(e=r[r.length-2],i=!0),a||(o=r[r.length-1],a=!0)}return new T(e,o)},t}(),k=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),N=function(t){function n(n){void 0===n&&(n=new T);var r=t.call(this)||this;return r.command="M",r.p0=n,r}return k(n,t),n.prototype.getPoint=function(t){return this.p0.clone()},n.prototype.getPoints=function(t){return void 0===t&&(t=10),[this.getPoint(0)]},n}(z),I=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),V=function(t){function n(n,r){void 0===n&&(n=new T),void 0===r&&(r=new T);var e=t.call(this)||this;return e.command="L",e.p0=n,e.p1=r,e}return I(n,t),n.prototype.getPoint=function(t){t=s(t,0,1);var n=this.p1.clone();return 1===t||n.subtract(this.p0).multiplyScalar(t).add(this.p0),n},n}(z),L=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),q=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.command="H",n}return L(n,t),n.prototype.fromArray=function(t,n,r){var e=t[0]===t[0].toLowerCase(),o=this._getLastCurveEndPoint(r,n);return this.p0.copy(o),this.p1.copy(o).setX(t[1]),e&&(this.p0.add(o),this.p1.add(o)),this},n.prototype.toString=function(){return this.command+" "+c(this.p1.x)},n}(V),W=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),X=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.command="V",n}return W(n,t),n.prototype.fromArray=function(t,n,r){var e=t[0]===t[0].toLowerCase(),o=this._getLastCurveEndPoint(r,n);return this.p0.copy(o),this.p1.copy(o).setY(t[1]),e&&(this.p0.add(o),this.p1.add(o)),this},n.prototype.toString=function(){return this.command+" "+c(this.p1.y)},n}(V),Y=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),H=function(t){function n(n,r,e,o,i,a,s){void 0===n&&(n=new T),void 0===r&&(r=0),void 0===e&&(e=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=new T);var c=t.call(this)||this;return c.command="A",c.p0=n,c.p1=s,c.rx=r,c.ry=e,c.xAxisRotation=o,c.largeArcFlag=i,c.sweepFlag=a,c}return Y(n,t),n.prototype.getPoint=function(t){return new T},n.prototype.fromArray=function(t,n,r){var e=r[n-1]||[],o=e.length;return t.length,this.p0.set(e[o-2],e[o-1]),this.rx=t[1],this.ry=t[2]||0,this.xAxisRotation=t[3]||0,this.largeArcFlag=t[4]||0,this.sweepFlag=t[5]||0,this.p1.set(t[6]||0,t[7]||0),this},n.prototype.toString=function(){var t=this,n=t.command,r=t.rx,e=t.ry,o=t.xAxisRotation,i=t.largeArcFlag,a=t.sweepFlag,s=t.p1;return"".concat(n," ").concat(r," ").concat(e," ").concat(o," ").concat(i," ").concat(a," ").concat(s.toString())},n}(z),G=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),R=function(t){function n(n,r,e){void 0===n&&(n=new T),void 0===r&&(r=new T),void 0===e&&(e=new T);var o=t.call(this)||this;return o.command="Q",o.p0=n,o.p1=r,o.p2=e,o}return G(n,t),n.prototype.getPoint=function(t){return new T(n.interpolation(t,this.p0.x,this.p1.x,this.p2.x),n.interpolation(t,this.p0.y,this.p1.y,this.p2.y))},n.interpolation=function(t,n,r,e){var o=1-t;return o*o*n+2*o*t*r+t*t*e},n}(z),J=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),K=function(t){function n(n,r,e,o){void 0===n&&(n=new T),void 0===r&&(r=new T),void 0===e&&(e=new T),void 0===o&&(o=new T);var i=t.call(this)||this;return i.command="C",i.p0=n,i.p1=r,i.p2=e,i.p3=o,i}return J(n,t),n.prototype.getPoint=function(t){return new T(n.interpolation(t,this.p0.x,this.p1.x,this.p2.x,this.p3.x),n.interpolation(t,this.p0.y,this.p1.y,this.p2.y,this.p3.y))},n.interpolation=function(t,n,r,e,o){var i=1-t;return i*i*i*n+3*i*i*t*r+3*i*t*t*e+t*t*t*o},n}(z),Q=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Z=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.command="T",n}return Q(n,t),n.prototype.fromArray=function(t,n,r){var e=r[n-1]||[],o=e.length,i=t[0]===t[0].toLowerCase(),a=["Q","q","T","t"].includes(e[0]),s=new T(e[o-2],e[o-1]),c=new T(e[o-4],e[o-3]);if(this.p0.copy(s),a?this.p1.copy(s).multiplyScalar(2).subtract(c):(console.warn("The previous command must be an other T, or Q command."),this.p1.copy(s)),this.p2.set(t[1]||0,t[2]||0),i)for(var u=0;u<4;u++)this["p"+u].add(s);return this},n.prototype.toString=function(){return this.command+" "+this.p2.toString()},n}(R),U=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),$=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.command="S",n}return U(n,t),n.prototype.fromArray=function(t,n,r){var e=r[n-1]||[],o=e.length,i=t[0]===t[0].toLowerCase(),a=["C","c","S","s"].includes(e[0]),s=this._getLastCurveEndPoint(r,n),c=new T(e[o-4],e[o-3]);if(this.p0.copy(s),a?this.p1.copy(s).multiplyScalar(2).subtract(c):(console.warn("The previous command must be an other S, or C command."),this.p1.copy(s)),this.p2.set(t[1]||0,t[2]||0),this.p3.set(t[3]||0,t[4]||0),i)for(var u=0;u<4;u++)this["p"+u].add(s);return this},n.prototype.toString=function(){return this.command+" "+this.p2.toString()+" "+this.p3.toString()},n}(K),tt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),nt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.command="Z",n}return tt(n,t),n.prototype.getPoints=function(t){return void 0===t&&(t=10),[]},n}(z),rt={M:N,L:V,V:X,H:q,Q:R,C:K,T:Z,S:$,A:H,Z:nt},et=new T;function ot(t,n){var r,e,o=1/0,i=-1/0;for(r=0;r<t.length;r++)e=t[r].dot(n),o=Math.min(o,e),i=Math.max(i,e);return{min:o,max:i}}function it(t,n,r){var e=ot(t,r),o=ot(n,r);return e.max<o.min||o.max<e.min}var at=function(){function t(t){this._curves=[],this._currentCommand="",this._currentPoint=new T,this._currentControlPoint=new T,this._bBox=new B,t&&this.set(t)}return Object.defineProperty(t.prototype,"length",{get:function(){return this._curves.length},enumerable:!1,configurable:!0}),t.prototype.at=function(t){return this._curves[t]},t.prototype.add=function(t){var n;return t=Array.isArray(t)?t:[t],(n=this._curves).push.apply(n,t),this},t.prototype.remove=function(t){return t=Array.isArray(t)?t:[t],this._curves=this._curves.filter((function(n){return!t.includes(n)})),this},t.prototype.set=function(t){return this._curves=[],this.add(t)},t.prototype.moveTo=function(t,n){var r=new N(new T(t,n));return this._currentPoint.set(t,n),this._currentCommand="M",this.add(r)},t.prototype.lineTo=function(t,n){var r=new V(this._currentPoint.clone(),new T(t,n));return this._currentPoint.set(t,n),this._currentCommand="L",this.add(r)},t.prototype.horizontalLineTo=function(t){var n=this._currentPoint.clone(),r=new q(n,new T(t,n.y));return this._currentPoint.setX(t),this._currentCommand="H",this.add(r)},t.prototype.verticalLineTo=function(t){var n=this._currentPoint.clone(),r=new X(n,new T(n.x,t));return this._currentPoint.setY(t),this._currentCommand="V",this.add(r)},t.prototype.quadraticCurveTo=function(t,n,r,e){var o=new R(this._currentPoint.clone(),new T(t,n),new T(r,e));return this._currentPoint.set(r,e),this._currentControlPoint.set(t,n),this._currentCommand="Q",this.add(o)},t.prototype.smoothQuadraticCurveTo=function(t,n){"T"!==this._currentCommand&&"Q"!==this._currentCommand&&console.warn("The previous method must be an other smoothQuadraticCurveTo(), or a quadraticCurveTo().");var r=this._currentPoint.clone().multiplyScalar(2).subtract(this._currentControlPoint),e=new Z(this._currentPoint.clone(),r,new T(t,n));return this._currentPoint.set(t,n),this._currentControlPoint.copy(r),this._currentCommand="T",this.add(e)},t.prototype.cubicCurveTo=function(t,n,r,e,o,i){var a=new K(this._currentPoint.clone(),new T(t,n),new T(r,e),new T(o,i));return this._currentPoint.set(o,i),this._currentControlPoint.set(r,e),this._currentCommand="C",this.add(a)},t.prototype.smoothCubicCurveTo=function(t,n,r,e){"S"!==this._currentCommand&&"C"!==this._currentCommand&&console.warn("The previous method must be an other smoothCubicCurveTo(), or a cubicCurveTo().");var o=this._currentPoint.clone().multiplyScalar(2).subtract(this._currentControlPoint);return new $(this._currentPoint.clone(),o,new T(t,n),new T(r,e)),this._currentPoint.set(r,e),this._currentControlPoint.copy(o),this._currentCommand="S",this},t.prototype.arcTo=function(t,n,r,e,o,i,a){var s=new H(this._currentPoint.clone(),t,n,r,e,o,new T(i,a));return this._currentPoint.set(i,a),this._currentCommand="A",this.add(s)},t.prototype.closePath=function(){var t=new nt;return this._currentCommand="Z",this.add(t)},t.prototype.fromString=function(t){var n=v(t).map((function(t,n,r){var e=(t[0]||"").toUpperCase();return(new(0,rt[e])).fromArray(t,n,r)}));return this.set(n)},t.prototype.toString=function(){return this._curves.map((function(t){return t.toString(" ")})).join(" ")},t.prototype.fromNumbers=function(t){for(var n=t.replace(/\,\s?/g," ").split(" ").map((function(t){return c(t)})),r=[],e=0;e<n.length;e+=2)r.push(new V(new T(n[e],n[e+1]),new T(n[(e+2)%n.length],n[(e+3)%n.length])));return this.set(r)},t.prototype.toNumbers=function(){return this.mapCurves((function(t){if(t instanceof V)return t.p0.toString()})).filter((function(t){return!!t})).join(" ")},t.prototype.toPoints=function(t){var n;return this.mapCurves((function(n){return n.getPoints(t)})).flat().filter((function(t,r,e){return!(n=e[r-1])||!t.isEqual(n)}))},t.prototype.updateBBox=function(){var t=this;return this.length?(this._bBox.flip(),this.eachCurve((function(n){t._bBox.union(n.updateBBox().getBBox())}))):this},t.prototype.getBBox=function(){return this._bBox},t.prototype.adjust=function(){var t=this._bBox.min,n=t.x,r=t.y;return this.eachCurve((function(t){t.translate(-n,-r)})),this},t.prototype.containsPoint=function(t,n){var r,e,o,i,a,s,c=t.x,u=t.y,p=this.toPoints(n),h=!1;for(r=0,e=p.length-1;r<p.length;e=r++)o=p[r].x,i=p[r].y,a=p[e].x,i>u!=(s=p[e].y)>u&&c<(a-o)*(u-i)/(s-i)+o&&(h=!h);return h},t.prototype.intersects=function(t,n){var r,e,o,i,a,s=this.toPoints(n),c=t.toPoints(n),u=s.length,p=c.length;for(r=0;r<u;r++)if(e=s[r],o=s[(r+1)%u],et.copy(o).subtract(e),i=et.x,a=et.y,it(s,c,et.set(-a,i)))return!1;for(r=0;r<p;r++)if(e=c[r],o=c[(r+1)%p],et.copy(o).subtract(e),i=et.x,a=et.y,it(s,c,et.set(-a,i)))return!1;return!0},t.prototype.eachCurve=function(t){return this._curves.forEach(t),this},t.prototype.mapCurves=function(t){return this._curves.map(t)},t}(),st=function(){function t(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}return t.prototype.fromArray=function(t){return this.a=t[0],this.b=t[1],this.c=t[2],this.d=t[3],this.tx=t[4],this.ty=t[5],this},t.prototype.fromObject=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.fromOptions=function(t){var n=t.left,r=t.top,e=t.angle,o=t.scaleX,i=t.scaleY,a=t.skewX,s=t.skewY;return this.reset(),this.translate(n,r),this.rotate(e),this.scaleX(o),this.scaleY(i),this.skewX(a),this.skewY(s),this},t.prototype.fromCSS=function(t){var n=t.replace("matrix(","").replace(")","").split(" ").map(parseFloat);return this.fromArray(n),this},t.prototype.toArray=function(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]},t.prototype.toObject=function(){return{a:this.a,b:this.b,c:this.c,d:this.d,tx:this.tx,ty:this.ty}},t.prototype.toOptions=function(){var t=this,n=t.a,r=t.b,e=t.c,o=t.d,i=t.tx,a=t.ty,s=p(Math.atan2(r,n)),c=Math.pow(n,2)+Math.pow(r,2),u=Math.sqrt(c);return{left:i,top:a,angle:s,scaleX:u,scaleY:(n*o-e*r)/u,skewX:p(Math.atan2(n*e+r*o,c)),skewY:0}},t.prototype.toCSS=function(){var t=this.toArray().join(", ");return"matrix(".concat(t,")")},t.prototype.translate=function(t,n){return this.tx=t,this.ty=n,this},t.prototype.rotate=function(n){if(!n)return this;var r=u(n),e=Math.cos(r),o=Math.sin(r),i=(new t).fromArray([e,o,-o,e,0,0]);return this.multiply(i)},t.prototype.scale=function(n,r){if(void 0===n)return this;void 0===r&&(r=n);var e=(new t).fromArray([n,0,0,r,0,0]);return this.multiply(e)},t.prototype.scaleX=function(n){if(void 0===n)return this;var r=(new t).fromArray([n,0,0,1,0,0]);return this.multiply(r)},t.prototype.scaleY=function(n){if(void 0===n)return this;var r=(new t).fromArray([1,0,0,n,0,0]);return this.multiply(r)},t.prototype.skewX=function(n){if(!n)return this;var r=u(n),e=(new t).fromArray([1,0,Math.tan(r),1,0,0]);return this.multiply(e)},t.prototype.skewY=function(n){if(!n)return this;var r=u(n),e=(new t).fromArray([1,Math.tan(r),0,1,0,0]);return this.multiply(e)},t.prototype.multiply=function(t){var n=this.a*t.a+this.c*t.b,r=this.b*t.a+this.d*t.b,e=this.a*t.c+this.c*t.d,o=this.b*t.c+this.d*t.d,i=this.a*t.tx+this.c*t.ty+this.tx,a=this.b*t.tx+this.d*t.ty+this.ty;return this.fromObject({a:n,b:r,c:e,d:o,tx:i,ty:a})},t.prototype.invert=function(){var t=this,n=t.a,r=t.b,e=t.c,o=t.d,i=t.tx,a=t.ty,s=n*o-r*e;return 0===s?this.fromArray([0,0,0,0,0,0]):this.fromArray([o/s,-r/s,-e/s,n/s,(e*a-o*i)/s,(r*i-n*a)/s])},t.prototype.reset=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.copy=function(t){return this.fromArray(t.toArray())},t.prototype.clone=function(){return(new t).copy(this)},t}(),ct=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),ut=function(){return ut=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},ut.apply(this,arguments)},pt=new T,ht=new T,lt=new T,ft=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.tagName="div",n.className="grafik-selector",n.bBox=new B,n}return ct(n,t),n.prototype.getAttributes=function(){var n=t.prototype.getAttributes.call(this);return ut(ut({},n),{"data-selector":!0})},n.prototype.getStyle=function(){var t=this.bBox,n=t.min,r=t.max;return pt.minPoints(n,r),ht.maxPoints(n,r),lt.subtractPoints(ht,pt),{left:pt.x+"px",top:pt.y+"px",width:lt.x+"px",height:lt.y+"px"}},n}(A),yt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),dt=function(){return dt=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},dt.apply(this,arguments)},gt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.tagName="div",n.className="grafik-control",n}return yt(n,t),n.prototype.init=function(t){this.set(t),this.setNodes(),this.onPointerStart=this.onPointerStart.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerEnd=this.onPointerEnd.bind(this)},n.prototype.setNodes=function(){return this},n.prototype.getSize=function(){var t=this.shape.getWorldMatrix().toOptions(),n=t.scaleX,r=t.scaleY;return this.shape.bBox.getSize().multiply(new T(n,r))},n.prototype.getStyle=function(){var t=this.shape,n=t.getWorldMatrix(!0).toOptions(),r=n.left,e=n.top,o=n.angle,i=this.getSize(),a=t.origin.clone().multiplyScalar(100),s=a.x,c=a.y;return{width:Math.abs(i.x)+"px",height:Math.abs(i.y)+"px",left:r+"px",top:e+"px",transform:"translate(".concat(-s,"%, ").concat(-c,"%) rotate(").concat(o,"deg)"),transformOrigin:"".concat(s,"% ").concat(c,"%")}},n.prototype.getAttributes=function(){var n=t.prototype.getAttributes.call(this);return dt(dt({},n),{"data-control":!0,"data-shape":this.shape.get("id")})},n.prototype.onPointerStart=function(t){},n.prototype.onPointerMove=function(t){},n.prototype.onPointerEnd=function(t){},n}(j(A)),_t=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),mt=function(){return mt=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},mt.apply(this,arguments)},vt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.tagName="div",n.className="grafik-control-node",n.name="",n.offset=new T,n}return _t(n,t),n.prototype.init=function(t){this.set(t),this.createId("node"),this.name&&this.addClass("grafik-control-node__"+this.name),t.getPosition&&(this.getPosition=t.getPosition.bind(this)),this.onPointerStart=this.onPointerStart.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerEnd=this.onPointerEnd.bind(this)},Object.defineProperty(n.prototype,"x",{get:function(){return this.offset.x},set:function(t){this.offset.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.offset.y},set:function(t){this.offset.y=t},enumerable:!1,configurable:!0}),n.prototype.getPosition=function(){var t=this.getControlSize(),n=this.offset,r=n.x,e=n.y;return new T(t.x*r,t.y*e)},n.prototype.connectTo=function(t){return this.connectedWith=t,t},n.prototype.getLineMatrix=function(){if(!this.connectedWith)return new st;var t=this.getPosition(),n=this.connectedWith.getPosition(),r=new st,e=-t.angleTo(n);return r.rotate(e)},n.prototype.getShape=function(){return this.parent.shape},n.prototype.getControlSize=function(){return this.parent.getSize()},n.prototype.getStyle=function(){var t=this.getPosition();return{left:t.x+"px",top:t.y+"px"}},n.prototype.getAttributes=function(){var n=t.prototype.getAttributes.call(this);return mt(mt({},n),{"data-control-node":!0,"data-id":this.id,"data-name":this.name,"data-shape":this.getShape().get("id")})},n.prototype.onPointerStart=function(t){},n.prototype.onPointerMove=function(t){},n.prototype.onPointerEnd=function(t){},n}(j(A)),bt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),wt=function(t){function n(n){var r=t.call(this)||this;return r._isDragging=!1,r._startVector=new T,r.init(n),r.addClass("grafik-transform-control"),r}return bt(n,t),n.prototype.setNodes=function(){var t=this,n=t.shape,r=new Tt({name:"tl",axis:"",x:0,y:0}),e=new Tt({name:"tc",axis:"y",x:.5,y:0}),o=new Tt({name:"tr",axis:"",x:1,y:0}),i=new Tt({name:"ml",axis:"x",x:0,y:.5}),a=new Tt({name:"mr",axis:"x",x:1,y:.5}),s=new Tt({name:"bl",axis:"",x:0,y:1}),c=new Tt({name:"bc",axis:"y",x:.5,y:1}),u=new Tt({name:"br",axis:"",x:1,y:1}),p=new Ft({name:"a",getPosition:function(){var n=t.getSize().x;return new T(n+20,-20)}}),h=new Bt({name:"o",getPosition:function(){var r=t.getSize(),e=n.get("origin"),o=e.x,i=e.y;return new T(r.x*o,r.y*i)}});return this.add([r,e,o,i,a,s,c,u,p,h]),this},n.prototype.onPointerStart=function(t){var n=this.shape,r=n.get("canvas"),e=n.getWorldMatrix().toOptions(),o=e.left,i=e.top;this._isDragging=!0,this._startVector.subtractPoints(r.getPointer(t),new T(o,i))},n.prototype.onPointerMove=function(t){if(this._isDragging){var n=this.shape,r=n.get("canvas"),e=n.parent.isCanvas?r.get("viewportMatrix").clone():n.parent.getWorldMatrix(),o=r.getPointer(t).subtract(this._startVector).transform(e.invert());n.set({left:c(o.x),top:c(o.y)})}},n.prototype.onPointerEnd=function(t){if(this._isDragging){var n=this.shape,r=n.left,e=n.top;this.shape.trigger("updated",{left:r,top:e},this.shape),this.shape.canvas&&this.shape.canvas.trigger("shapes:updated",{left:r,top:e},this.shape)}this._isDragging=!1},n}(gt),xt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Ot=function(t){function n(n){var r=t.call(this)||this;return r.init(n),r.addClass("grafik-path-control"),r}return xt(n,t),n.prototype.setNodes=function(){return this},n}(gt),Pt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Ct=function(t){function n(n){var r=t.call(this)||this;return r.init(n),r.addClass("grafik-text-control"),r}return Pt(n,t),n}(gt),At=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),St=function(t){function n(n){var r=t.call(this)||this;return r.init(n),r.addClass("grafik-gradient-control"),r}return At(n,t),n}(gt),jt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Ft=function(t){function n(n){var r=t.call(this)||this;return r._isDragging=!1,r._startAngle=0,r._startVector=0,r.init(n),r}return jt(n,t),n.prototype.onPointerStart=function(t){var n=this.getShape(),r=n.getWorldMatrix(!0).toOptions(),e=r.left,o=r.top;this._isDragging=!0,this._startAngle=n.get("angle"),this._startMatrix=(new st).translate(e,o).invert(),this._startVector=(new T).angleTo(n.getLocalPointer(t,this._startMatrix))},n.prototype.onPointerMove=function(t){if(this._isDragging){var n=this.getShape(),r=n.getLocalPointer(t,this._startMatrix),e=(new T).angleTo(r)-this._startVector,o=c(this._startAngle+e);o<0&&(o+=360),o%=360,n.set("angle",o)}},n.prototype.onPointerEnd=function(t){this._isDragging=!1},n}(vt),Et=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Bt=function(t){function n(n){var r=t.call(this)||this;return r._isDragging=!1,r._startVector=new T,r._startPosition=new T,r._startOrigin=new T,r.init(n),r}return Et(n,t),n.prototype.onPointerStart=function(t){var n=this.getShape(),r=n.get("canvas"),e=n.getWorldMatrix().toOptions(),o=e.left,i=e.top;this._isDragging=!0,this._startVector.copy(r.getPointer(t)),this._startPosition.set(o,i),this._startOrigin.copy(n.get("origin"))},n.prototype.onPointerMove=function(t){if(this._isDragging){var n=this.getShape(),r=n.get("canvas"),e=n.parent.isCanvas?r.get("viewportMatrix").clone():n.parent.getWorldMatrix(),o=r.getPointer(t).subtract(this._startVector.clone().subtract(this._startPosition)).transform(e.clone().invert()),i=n.getWorldMatrix().invert().translate(0,0),a=r.getPointer(t).subtract(this._startVector).divide(n.bBox.getSize()).transform(i).add(this._startOrigin);n.set({left:c(o.x),top:c(o.y),originX:a.x,originY:a.y})}},n.prototype.onPointerEnd=function(t){this._isDragging=!1},n}(vt),Mt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Tt=function(t){function n(n){var r=t.call(this)||this;return r.axis="",r._isDragging=!1,r._startScale=new T,r._startVector=new T,r._startMatrix=new st,r.init(n),r}return Mt(n,t),n.prototype.onPointerStart=function(t){var n=this.getShape(),r=n.getWorldMatrix(!0),e=r.toOptions(),o=(e.left,e.top,n.get(["scaleX","scaleY"])),i=o.scaleX,a=o.scaleY;this._startScale.set(i,a),this._startVector.copy(n.getLocalPointer(t)),this._startMatrix.copy(r.invert()),this._isDragging=!0},n.prototype.onPointerMove=function(t){if(this._isDragging){var n=this.getShape(),r=n.getLocalPointer(t,this._startMatrix).divide(this._startVector).multiply(this._startScale).abs(),e=this._startScale.x/this._startScale.y,o={};"x"===this.axis?o.scaleX=c(r.x):"y"===this.axis?o.scaleY=c(r.y):(o.scaleX=c(Math.max(r.x,r.y)),o.scaleY=c(Math.max(r.x,r.y))/e),n.set(o)}},n.prototype.onPointerEnd=function(t){this._isDragging=!1},n}(vt),Dt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),zt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.id="",n.name="",n}return Dt(n,t),n.prototype.createId=function(){this.id||(this.id=l(this.name))},n.prototype.toJSON=function(){return{}},n}(O(o)),kt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Nt=function(t){function n(){var n=t.call(this)||this;return n.name="timeline",n.createId(),n}return kt(n,t),Object.defineProperty(n.prototype,"animations",{get:function(){return this.getChildren()},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){var t=this.mapChildren((function(t){return t.duration}));return t.length?Math.max.apply(Math,t):0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"time",{get:function(){var t=this.reduceChildren((function(t,n){return n.duration>t.duration?n:t}),this.firstChild());return this.childrenLength?t.time:0},enumerable:!1,configurable:!0}),n.prototype.play=function(){return this.eachChild((function(t){return t.play()})),this},n.prototype.pause=function(){return this.eachChild((function(t){return t.pause()})),this},n.prototype.seek=function(t){return this.eachChild((function(n){return n.seek(t)})),this},n.prototype.toJSON=function(){return{animations:this.mapChildren((function(t){return t.toJSON()}))}},n}(j(zt)),It={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return 1-Math.pow(1-t,2)},quadraticInOut:function(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2},cubicIn:function(t){return t*t*t},cubicOut:function(t){return 1-Math.pow(1-t,3)},cubicInOut:function(t){return t<.5?4*Math.pow(t,3):1-Math.pow(-2*t+2,3)/2},bounceIn:function(t){return 1-It.bounceOut(1-t)},bounceOut:function(t){var n=7.5625,r=2.75;return t<1/r?n*t*t:t<2/r?n*(t-=1.5/r)*t+.75:t<2.5/r?n*(t-=2.25/r)*t+.9375:n*(t-=2.625/r)*t+.984375},bounceInOut:function(t){return t<.5?(1-It.bounceOut(1-2*t))/2:(1+It.bounceOut(2*t-1))/2},backIn:function(t){return 2.70158*Math.pow(t,3)-1.70158*Math.pow(t,2)},backOut:function(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}},Vt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Lt=function(t){function n(n,r,e,o,i){void 0===i&&(i="linear");var a=t.call(this)||this;return a.from=0,a.to=0,a.startValue=null,a.endValue=null,a.from=n,a.to=r,a.startValue=e,a.endValue=o,a._startValue=a._parseValue(e),a._endValue=a._parseValue(o),a.easing="string"==typeof i?It[i]:i,a.name="keyframe",a.createId(),a}return Vt(n,t),Object.defineProperty(n.prototype,"duration",{get:function(){return this.to-this.from},enumerable:!1,configurable:!0}),n.prototype.getValueAt=function(t){if(t<this.from||t>this.to)return null;var n=(t-this.from)/(this.to-this.from),r=this.easing(n);return this._interpolateValue(r)},n.prototype._interpolateValue=function(t){var n=this;return Array.isArray(this._startValue)&&Array.isArray(this._endValue)?this._startValue.map((function(r,e){var o=n._endValue[e];return"number"==typeof r&&"number"==typeof o?r+(o-r)*t:r})).join(""):"number"!=typeof this.startValue||"number"!=typeof this.endValue?0:this.startValue+(this.endValue-this.startValue)*t},n.prototype._parseValue=function(t){return"number"==typeof t||(M.isColor(t)&&(t=new M(t).toRGBA()),"string"==typeof t&&(t=t.split(/(\d+\.?\d*)|(\D+)/g).filter(Boolean).map((function(t){var n=parseFloat(t);return isNaN(n)?t:n})))),t},n.prototype.toJSON=function(){return{to:this.to,value:this.endValue,easing:this.easing.name}},n}(zt),qt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Wt=function(t){function n(n,r,e){var o=t.call(this)||this;return o.property="",o.originalValue=0,o.property=n,o.originalValue=r,null==e||e.forEach((function(t){o.addKeyframe(t)})),o.name="track",o.createId(),o}return qt(n,t),Object.defineProperty(n.prototype,"keyframes",{get:function(){return this.getChildren()},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return this.reduceChildren((function(t,n){return t+n.duration}),0)},enumerable:!1,configurable:!0}),n.prototype.addKeyframe=function(t){var n=this.lastChild(),r=n?n.to:0,e=n?n.endValue:this.originalValue,o=new Lt(r,t.to,e,t.value,t.easing);return this.add(o),o},n.prototype.getValueAt=function(t){if(!this.childrenLength)return null;for(var n=0;n<this.childrenLength;n++){var r=this.childAt(n);if(r){var e=r.getValueAt(t);if(null!=e)return e}}return null},n.prototype.toJSON=function(){return{property:this.property,originalValue:this.originalValue,keyframes:this.mapChildren((function(t){return t.toJSON()}))}},n}(j(zt)),Xt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Yt=function(t){function n(n){var r=t.call(this)||this;return r._isPlaying=!1,r._startTime=0,r._currentTime=0,r.shape=n,r.name="animation",r.createId(),r}return Xt(n,t),Object.defineProperty(n.prototype,"tracks",{get:function(){return this.getChildren()},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){var t=this.mapChildren((function(t){return t.duration}));return t.length?Math.max.apply(Math,t):0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"time",{get:function(){return this._currentTime},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"playing",{get:function(){return this._isPlaying},enumerable:!1,configurable:!0}),n.prototype.play=function(){return this._isPlaying||(this._isPlaying=!0,this._startTime=performance.now()-this._currentTime,requestAnimationFrame(this._render.bind(this)),this.trigger("played",this.shape),this.shape.trigger("animation:played",this),this.shape.canvas.trigger("shapes:animation:played",this,this.shape)),this},n.prototype.pause=function(){return this._isPlaying=!1,this.trigger("paused",this.shape),this.shape.trigger("animation:paused",this),this.shape.canvas.trigger("shapes:animation:paused",this,this.shape),this},n.prototype.seek=function(t){return this._currentTime=t,this._update(),this},n.prototype._render=function(t){this._isPlaying&&(this._currentTime=t-this._startTime,this._update(),this._currentTime<=this.duration?requestAnimationFrame(this._render.bind(this)):(this._isPlaying=!1,this._startTime=0,this._currentTime=0,this.trigger("completed",this.shape),this.shape.trigger("animation:completed",this),this.shape.canvas.trigger("shapes:animation:completed",this,this.shape)))},n.prototype._update=function(){var t=this;this.eachChild((function(n){var r=n.getValueAt(t._currentTime);null!==r&&t.shape.set(n.property,r,!0)})),this.trigger("updated",this.shape),this.shape.trigger("animation:updated",this),this.shape.canvas.trigger("shapes:animation:updated",this,this.shape)},n.prototype.setTracks=function(t){var n=this,r=t.map((function(t){return n.addTrack(t.property,t.keyframes)}));return this.setChildren(r),this},n.prototype.addTrack=function(t,n){var r=new Wt(t,this.shape.get(t),n);return this.add(r),r},n.prototype.toJSON=function(){return{tracks:this.mapChildren((function(t){return t.toJSON()}))}},n}(j(zt)),Ht=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Gt=function(){return Gt=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},Gt.apply(this,arguments)},Rt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.isShape=!0,n.selectable=!0,n.matrix=new st,n.bBox=new B,n.origin=new T(.5,.5),n._controls={},n.transformProps=["left","top","angle","scaleX","scaleY","skewX","skewY"],n.left=0,n.top=0,n.angle=0,n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n._fill="black",n._stroke="black",n._defs={},n.strokeWidth=0,n.opacity=1,n}return Ht(n,t),Object.defineProperty(n.prototype,"fill",{get:function(){return this._fill},set:function(t){var n,r;this._defs.fill&&(null===(n=this.canvas)||void 0===n||n.removeDefs(this._defs.fill)),M.isColor(t)?(this._fill=t,this._defs.fill=null):(t.shape=this,null===(r=this.canvas)||void 0===r||r.addDefs(t),this._fill="url(#".concat(t.id,")"),this._defs.fill=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var n,r;this._defs.stroke&&(null===(n=this.canvas)||void 0===n||n.removeDefs(this._defs.stroke)),M.isColor(t)?(this._stroke=t,this._defs.stroke=null):(t.shape=this,null===(r=this.canvas)||void 0===r||r.addDefs(t),this._stroke="url(#".concat(t.id,")"),this._defs.stroke=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"originX",{get:function(){return this.origin.x},set:function(t){this.origin.x=t,this.bBox.fromSizeAndOrigin(this.bBox.getSize(),this.origin)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"originY",{get:function(){return this.origin.y},set:function(t){this.origin.y=t,this.bBox.fromSizeAndOrigin(this.bBox.getSize(),this.origin)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"animation",{get:function(){return this._animation.toJSON()},set:function(t){var n=t.tracks;this._animation.setTracks(n)},enumerable:!1,configurable:!0}),n.prototype.init=function(t){this._animation=new Yt(this),this.set(t,!0),this.createId(this.tagName),this.addControl("transform",new wt({shape:this})).setControl("transform"),this.updateMatrix(),this.updateBBox(),this.trigger("init",this)},n.prototype.set=function(n,r,e){var o,i;if(void 0===e&&(e=!1),t.prototype.set.call(this,n,r,!0),!n)return this;var a=this.transformProps;if("string"==typeof n)a.includes(n)&&this.updateMatrix(),this.updateOthersWithKeys([n]),e||(this.trigger("set",((o={})[n]=r,o),this),this.canvas&&this.canvas.trigger("shapes:set",((i={})[n]=r,i),this));else{var s=void 0;for(s=0;s<a.length;s++)if(a[s]in n){this.updateMatrix();break}this.updateOthersWithKeys(Object.keys(n)),r||(this.trigger("set",n,this),this.canvas&&this.canvas.trigger("shapes:set",n,this))}return this},n.prototype.getAttrMap=function(){return["fill","stroke","strokeWidth"]},n.prototype.updateOthersWithKeys=function(t){return this},n.prototype.getAttributes=function(n){var r=t.prototype.getAttributes.call(this,n),e=this.bBox.getSize().multiply(this.origin).multiplyScalar(-1).toString();return Gt(Gt({},r),{transform:"translate(".concat(e,")")})},n.prototype.getWrapperAttributes=function(){var t={id:this.id,transform:this.matrix.toCSS()};return this.className&&(t.className=this.className),t},n.prototype.addControl=function(t,n){return t&&(this._controls[t]=n),this},n.prototype.getControl=function(t){return this._controls[t||this._activeControl]},n.prototype.setControl=function(t){return this._activeControl=t,this.trigger("control:switched",this.getControl(),this),this.canvas&&this.canvas.trigger("shapes:control:switched",this.getControl(),this),this},n.prototype.updateMatrix=function(){return this.matrix.fromOptions(this.get(this.transformProps)),this},n.prototype.updateBBox=function(){return console.warn("updateBBox() must be implemented by subclass."),this},n.prototype.getWorldMatrix=function(t){var n,r=this.parent,e=r.viewportMatrix,o=r.isCanvas,i=r.hasDrawingArea;if(o)if(t&&i){var a=this.parent.getDrawingAreaPosition(),s=a.x,c=a.y,u=(new st).fromArray([1,0,0,1,s,c]);n=e.clone().multiply(u)}else n=e;else n=this.parent.getWorldMatrix();return(new st).copy(n).multiply(this.matrix)},n.prototype.getLocalPointer=function(t,n){return this.canvas.getPointer(t).transform(n||this.getWorldMatrix(!0).invert())},n.prototype.getAnimation=function(){return this._animation},n.prototype.animate=function(t,n){return this._animation.addTrack(t,n)},n.prototype.toPolygon=function(){return this.bBox.toPolygon(this.getWorldMatrix(!0))},n.prototype.toJSON=function(){var n,r,e=this,o=t.prototype.toJSON.call(this),i=this.transformProps.reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{}),a={};for(n in this._defs)(r=this._defs[n])&&(a[n]=r.toJSON());return delete o.transform,Gt(Gt(Gt(Gt({},o),i),a),{animation:this.animation})},n}(A),Jt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Kt=function(t){function n(n){var r=t.call(this)||this;return r.tagName="rect",r.width=0,r.height=0,r.init(n),r}return Jt(n,t),n.prototype.getAttrMap=function(){return t.prototype.getAttrMap.call(this).concat(["width","height"])},n.prototype.updateOthersWithKeys=function(t){return(t.includes("width")||t.includes("height"))&&this.updateBBox(),this},n.prototype.updateBBox=function(){return this.bBox.fromSizeAndOrigin(new T(this.width,this.height),this.origin),this},n}(Rt),Qt=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Zt=function(t){function n(n){var r=t.call(this)||this;return r.tagName="circle",r.r=0,r.cx=0,r.cy=0,r.init(n),r}return Qt(n,t),n.prototype.getAttrMap=function(){return t.prototype.getAttrMap.call(this).concat(["r","cx","cy"])},n.prototype.updateOthersWithKeys=function(t){return t.includes("r")&&(this.updateBBox(),this.cx=this.r,this.cy=this.r),this},n.prototype.updateBBox=function(){return this.bBox.fromSizeAndOrigin((new T).addScalar(2*this.r),this.origin),this},n}(Rt),Ut=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),$t=function(t){function n(n){var r=t.call(this)||this;return r.tagName="ellipse",r.rx=0,r.ry=0,r.cx=0,r.cy=0,r.init(n),r}return Ut(n,t),n.prototype.getAttrMap=function(){return t.prototype.getAttrMap.call(this).concat(["rx","ry","cx","cy"])},n.prototype.updateOthersWithKeys=function(t){return(t.includes("rx")||t.includes("ry"))&&(this.updateBBox(),this.cx=this.rx,this.cy=this.ry),this},n.prototype.updateBBox=function(){return this.bBox.fromSizeAndOrigin(new T(this.rx,this.ry).multiplyScalar(2),this.origin),this},n}(Rt),tn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),nn=function(){return nn=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},nn.apply(this,arguments)},rn=function(t){function n(n){var r=t.call(this)||this;return r.tagName="path",r.path=new at,r.init(n),r.addControl("path",new Ot({shape:r,path:r.path})),r}return tn(n,t),n.prototype.getAttributes=function(n){var r=t.prototype.getAttributes.call(this,n);return nn(nn({},r),{d:this.path.toString()})},n.prototype.updateOthersWithKeys=function(t){return t.includes("d")&&(this.path.fromString(this.d).adjust(),this.updateBBox()),this},n.prototype.updateBBox=function(){return this.bBox.fromSizeAndOrigin(this.path.updateBBox().getBBox().getSize(),this.origin),this},n.prototype.getPath=function(){return this.path},n}(Rt),en=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),on=function(){return on=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},on.apply(this,arguments)},an=function(t){function n(n){var r=t.call(this)||this;return r.tagName="polyline",r.path=new at,r.init(n),r}return en(n,t),n.prototype.getAttributes=function(n){var r=t.prototype.getAttributes.call(this,n);return on(on({},r),{points:this.path.toNumbers()})},n.prototype.updateOthersWithKeys=function(t){return t.includes("points")&&(this.path.fromNumbers(this.points).adjust(),this.updateBBox()),this},n.prototype.updateBBox=function(){return this.bBox.fromSizeAndOrigin(this.path.updateBBox().getBBox().getSize(),this.origin),this},n}(Rt),sn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),cn=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.tagName="polygon",n}return sn(n,t),n}(an),un=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),pn=document.createElement("canvas").getContext("2d"),hn=function(t){function n(n){var r=t.call(this)||this;return r.tagName="text",r.text="",r.fontFamily="Arial",r.fontSize=40,r.fontWeight="normal",r.x=0,r.y=40,r.init(n),r.addControl("text",new Ct({shape:r})),r}return un(n,t),n.prototype.getAttrMap=function(){return t.prototype.getAttrMap.call(this).concat(["x","y","fontFamily","fontSize"])},n.prototype.updateOthersWithKeys=function(t){return(t.includes("text")||t.includes("fontFamily")||t.includes("fontSize"))&&this.updateBBox(),t.includes("fontSize")&&(this.y=this.fontSize),this},n.prototype.updateBBox=function(){return this.bBox.fromSizeAndOrigin(this.getTextSize(),this.origin),this},n.prototype.getTextSize=function(){pn.font="".concat(this.fontSize,"px ").concat(this.fontFamily);var t=pn.measureText(this.text),n=t.width,r=t.fontBoundingBoxAscent,e=t.fontBoundingBoxDescent;return new T(n,r+e)},n}(Rt),ln=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),fn=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.tagName="textPath",n}return ln(n,t),n}(hn),yn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),dn=function(t){function n(n){var r=t.call(this)||this;return r.tagName="image",r.href="",r.init(n),r.setImage(r.href),r}return yn(n,t),n.prototype.setImage=function(t){return this},n.prototype.getAttrMap=function(){return t.prototype.getAttrMap.call(this).concat(["href"])},n}(Kt),gn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),_n=function(){return _n=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},_n.apply(this,arguments)},mn=function(t){function n(n){var r=t.call(this)||this;return r.tagName="g",r.init(n),r.updateBBox=r.updateBBox.bind(r),r}return gn(n,t),n.prototype.getAttributes=function(n){var r=t.prototype.getAttributes.call(this,n),e=this.bBox.getSize().multiply(this.origin.clone().negate().addScalar(.5));return _n(_n({},r),{transform:"translate(".concat(e,")")})},n.prototype.updateBBox=function(){var t=this.mapChildren((function(t){return t.bBox.getLineEdges(t.matrix)})).flat();return this.bBox.fromPoints(t),this.origin.copy(this.bBox.getOrigin()),this},n.prototype.add=function(n,r){var e=this;return t.prototype.add.call(this,n,r),(n=Array.isArray(n)?n:[n]).forEach((function(t){return t.on("set",e.updateBBox)})),this.updateBBox(),this},n.prototype.remove=function(n,r){var e=this;return t.prototype.remove.call(this,n,r),(n=Array.isArray(n)?n:[n]).forEach((function(t){return t.off("set",e.updateBBox)})),this.updateBBox(),this},n}(E(Rt)),vn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),bn=function(t){function n(n){void 0===n&&(n={});var r=t.call(this)||this;return r.isCanvas=!0,r.multiselection=!0,r.zoomable=!0,r.minZoom=.1,r.maxZoom=10,r.mode="select",r.penWidth=2,r.penColor="#000",r.tagName="svg",r.xmlns="http://www.w3.org/2000/svg",r.preserveAspectRatio="xMidYMid slice",r.className="grafik-canvas",r.width=0,r.height=0,r.viewportMatrix=new st,r.hasDrawingArea=!1,r.showGrid=!1,r.autoSize=!1,r.gridColorDark="#EEEEEE",r.gridColorLight="#FFFFFF",r.gridSize=10,r.drawingWidth=0,r.drawingHeight=0,r._defs=[],r._animation=new Nt,r._selectedShapes=[],r._selector=new ft,r._selection=!1,r._zoom=1,r._pan=new T,r._isDragging=!1,r._startVector=new T,r._isDrawing=!1,r.set(n,!0),r.trigger("init",r),r}return vn(n,t),Object.defineProperty(n.prototype,"viewBox",{get:function(){return this._viewBox?this._viewBox.join(" "):"0 0 0 0"},set:function(t){this._viewBox="string"==typeof t?t.split(" ").map((function(t){return c(t)})):t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"zoom",{get:function(){return this._zoom},set:function(t){this._zoom=t,this.zoomTo(this._zoom,this._pan)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"panX",{get:function(){return this._pan.x},set:function(t){this._pan.x=t,this.zoomTo(this._zoom,this._pan)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"panY",{get:function(){return this._pan.y},set:function(t){this._pan.y=t,this.zoomTo(this._zoom,this._pan)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pan",{get:function(){return this._pan},enumerable:!1,configurable:!0}),n.prototype.getAttrMap=function(){return t.prototype.getAttrMap.call(this).concat(["xmlns","width","height","viewBox","preserveAspectRatio"])},n.prototype.getDrawingAreaPosition=function(){return this.hasDrawingArea?new T(this.width/2-this.drawingWidth/2,this.height/2-this.drawingHeight/2):new T},n.prototype.getDrawingAreaSize=function(){return this.hasDrawingArea?new T(this.drawingWidth,this.drawingHeight):new T(this.width,this.height)},n.prototype.getShapesWrapperAttributes=function(){if(!this.hasDrawingArea)return{};var t=this.getDrawingAreaPosition(),n=t.x,r=t.y;return{transform:"translate(".concat(n,", ").concat(r,")")}},n.prototype.getDrawingAreaAttributes=function(){if(!this.hasDrawingArea)return{};var t=this.getDrawingAreaPosition();return{x:t.x,y:t.y,width:this.drawingWidth,height:this.drawingHeight}},n.prototype.getGridPatternAttributes=function(){if(!this.showGrid)return{};var t=this.getDrawingAreaPosition(),n=t.x,r=t.y;return{id:"grafik-grid",width:2*this.gridSize,height:2*this.gridSize,x:n,y:r,patternUnits:"userSpaceOnUse"}},n.prototype.getGridPatternPaths=function(t){var n,r;if(void 0===t&&(t=!1),!this.showGrid)return[];var e=this.gridSize,o=2*e;return[(n={d:"M 0 0 L ".concat(o," 0 ").concat(o," ").concat(o," 0 ").concat(o," Z"),fill:this.gridColorDark,stroke:"none"},n[t?"stroke-width":"strokeWidth"]=0,n),(r={d:"M ".concat(e," 0 L ").concat(o," 0 ").concat(o," ").concat(e," 0 ").concat(e," 0 ").concat(o," ").concat(e," ").concat(o," Z"),fill:this.gridColorLight,stroke:"none"},r[t?"stroke-width":"strokeWidth"]=0,r)]},n.prototype.selectShapes=function(t,n){var r=this;void 0===n&&(n=!1),t=Array.isArray(t)?t:[t];var e=this._selectedShapes.length;return t.forEach((function(t){!r._selectedShapes.includes(t)&&t.selectable&&r._selectedShapes.push(t)})),n&&e===this._selectedShapes.length||(this.trigger("shapes:selected",t),this.trigger("shapes:selection:updated",t)),this},n.prototype.releaseShapes=function(t,n){void 0===n&&(n=!1),t=Array.isArray(t)?t:[t];var r=this._selectedShapes.length;return(null==t?void 0:t[0])?this._selectedShapes=this._selectedShapes.filter((function(n){return!t.includes(n)})):this._selectedShapes=[],n&&r===this._selectedShapes.length||(this.trigger("shapes:released",t),this.trigger("shapes:selection:updated",t)),this},n.prototype.getSelectedShapes=function(){return this._selectedShapes},n.prototype.eachSelectedShape=function(t){return this._selectedShapes.forEach(t),this},n.prototype.mapSelectedShapes=function(t){return this._selectedShapes.map(t)},n.prototype.addDefs=function(t,n){var r=this;return void 0===n&&(n=!1),(t=Array.isArray(t)?t:[t]).forEach((function(t){r._defs.includes(t)||r._defs.push(t)})),n||this.trigger("defs:added",t),this},n.prototype.removeDefs=function(t,n){return void 0===n&&(n=!1),this},n.prototype.getDefs=function(){return this._defs},n.prototype.hasDefs=function(){return this.hasDrawingArea||this.showGrid||!!this._defs.length},n.prototype.eachDef=function(t){return this._defs.forEach(t),this},n.prototype.mapDefs=function(t){return this._defs.map(t)},n.prototype.getSelector=function(){return this._selector},n.prototype.getAnimation=function(){return this._animation},n.prototype.setResponsiveSize=function(t){if(this.autoSize&&t){t.style.display="none";var n=t.parentElement||{},r=n.clientWidth,e=void 0===r?0:r,o=n.clientHeight,i=void 0===o?0:o;t.style.display="",this.set({width:e,height:i}).zoomTo()}},n.prototype.zoomTo=function(t,n){void 0===t&&(t=1),void 0===n&&(n=new T);var r=this.getSize(),e=r.clone().multiplyScalar(t),o=(new T).subtractPoints(e,r).divideScalar(2).multiplyScalar(-1).add(n);this.viewportMatrix.fromArray([t,0,0,t,o.x,o.y]);var i=this.viewportMatrix,a=i.a,c=i.d,u=i.tx,p=i.ty,h=this.width,l=this.height;return this._zoom=s(t,this.minZoom,this.maxZoom),this._pan.copy(n),this.set("viewBox",[-u/a,-p/c,h/a,l/c]),this},n.prototype.getSize=function(){return new T(this.width,this.height)},n.prototype.getPointer=function(t){var n="ontouchstart"in window?t.touches[0]:t,r=n.clientX,e=n.clientY,o=n.currentTarget.getBoundingClientRect(),i=o.left,a=o.top;return new T(r-i,e-a)},n.prototype._onPointerStartInSelectMode=function(t){var n=t.target.dataset,r=n.shape,e=n.name,o="controlNode"in n,i=this.getPointer(t),a=this.findLastChildByPointer(i);o?(this._currentNode=e,this.eachSelectedShape((function(n){var r;null===(r=n.getControl().childByName(e))||void 0===r||r.onPointerStart(t)}))):(r||(a?this.releaseShapes().selectShapes(a):(this.releaseShapes(),this.multiselection&&(this._selector.bBox.reset().min.copy(i),this._selector.bBox.max.copy(i),this.trigger("selector:updated"),this._selection=!0))),this.eachSelectedShape((function(n){n.getControl().onPointerStart(t)})))},n.prototype._onPointerMoveInSelectMode=function(t){var n=this;this._selection?(this._selector.bBox.max.copy(this.getPointer(t)),this.trigger("selector:updated")):this.eachSelectedShape((function(r){var e;r.getControl().onPointerMove(t),null===(e=r.getControl().childByName(n._currentNode))||void 0===e||e.onPointerMove(t)}))},n.prototype._onPointerEndInSelectMode=function(t){var n=this;if(this._selection){var r=this.mapChildren((function(t){var r=n._selector.bBox.toPolygon(),e=t.toPolygon();return!n._selector.bBox.isEmpty()&&r.intersects(e)&&t})).filter((function(t){return!!t}));this.selectShapes(r),this._selector.bBox.reset(),this.trigger("selector:updated"),this._selection=!1}else this.eachSelectedShape((function(r){var e;r.getControl().onPointerEnd(t),null===(e=r.getControl().childByName(n._currentNode))||void 0===e||e.onPointerEnd(t)})),this._currentNode=""},n.prototype._onPointerStartInPanMode=function(t){this._isDragging=!0,this._startVector.subtractPoints(this.getPointer(t),this._pan)},n.prototype._onPointerMoveInPanMode=function(t){if(this._isDragging){var n=this.getPointer(t).subtract(this._startVector);this.zoomTo(this._zoom,n)}},n.prototype._onPointerEndInPanMode=function(t){this._isDragging=!1},n.prototype._onPointerStartInDrawMode=function(t){var n=this.getPointer(t).transform(this.viewportMatrix.clone().invert()).subtract(this.getDrawingAreaPosition()),r=n.x,e=n.y,o=new rn({left:0,top:0,originX:0,originY:0,stroke:this.penColor,strokeWidth:this.penWidth,fill:"none"});o.getPath().moveTo(r,e),this._isDrawing=!0,this._drawingPath=o,this.add(o)},n.prototype._onPointerMoveInDrawMode=function(t){if(this._isDrawing){var n=this.getPointer(t).transform(this.viewportMatrix.clone().invert()).subtract(this.getDrawingAreaPosition()),r=n.x,e=n.y;this._drawingPath.getPath().lineTo(r,e),this._drawingPath.updateBBox().set({})}},n.prototype._onPointerEndInDrawMode=function(t){if(this._isDrawing){var n=this._drawingPath,r=n.getPath(),e=r.getBBox(),o=e.min.clone().add(e.getSize().divideScalar(2));r.adjust(),n.updateBBox().set({left:o.x,top:o.y,originX:.5,originY:.5}),this._isDrawing=!1}},n.prototype.onPointerStart=function(t){switch(this.mode){case"select":this._onPointerStartInSelectMode(t);break;case"pan":this._onPointerStartInPanMode(t);break;case"draw":this._onPointerStartInDrawMode(t)}},n.prototype.onPointerMove=function(t){switch(this.mode){case"select":this._onPointerMoveInSelectMode(t);break;case"pan":this._onPointerMoveInPanMode(t);break;case"draw":this._onPointerMoveInDrawMode(t)}},n.prototype.onPointerEnd=function(t){switch(this.mode){case"select":this._onPointerEndInSelectMode(t);break;case"pan":this._onPointerEndInPanMode(t);break;case"draw":this._onPointerEndInDrawMode(t)}},n.prototype.onWheel=function(t){this.zoomable&&(t.preventDefault(),this.getPointer(t),this.getSize(),this.zoomTo(c(this.zoom*Math.pow(.999,t.deltaY)),this._pan))},n}(E(A)),wn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),xn=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.isDefinition=!0,n}return wn(n,t),n.prototype.init=function(t){this.set(t,!0),this.createId(this.tagName),this.trigger("init",this)},n.prototype.getAttrMap=function(){return["id"]},n}(j(A)),On=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Pn=function(t){function n(n){var r=t.call(this)||this;return r.tagName="clipPath",r.init(n),r}return On(n,t),n}(xn),Cn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),An=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Cn(n,t),Object.defineProperty(n.prototype,"colorStops",{get:function(){return this.getChildren()},set:function(t){var n=t.map((function(t){return new Mn(t)}));this.setChildren(n,!0)},enumerable:!1,configurable:!0}),n}(xn),Sn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),jn=function(t){function n(n){var r=t.call(this)||this;return r.tagName="linearGradient",r.init(n),r}return Sn(n,t),n}(An),Fn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),En=function(t){function n(n){var r=t.call(this)||this;return r.tagName="radialGradient",r.init(n),r}return Fn(n,t),n}(An),Bn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Mn=function(t){function n(n){var r=t.call(this)||this;return r.tagName="stop",r.offset=0,r.stopColor="",r.stopOpacity=1,r.set(n),r.createId("stop"),r}return Bn(n,t),n.prototype.getAttrMap=function(){return["offset","stopColor","stopOpacity"]},n}(A),Tn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Dn=function(t){function n(n){var r=t.call(this)||this;return r.tagName="pattern",r.init(n),r}return Tn(n,t),n}(xn),zn=function(t){this._canvas=t},kn={g:mn,rect:Kt,circle:Zt,ellipse:$t,path:rn,polygon:cn,polyline:an,image:dn,text:hn,"text-path":fn},Nn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),In=function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(t);o<e.length;o++)n.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(r[e[o]]=t[e[o]])}return r},Vn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Nn(n,t),n.prototype.load=function(t){var n=this;if(!t)return this._canvas;var r=t.children,e=In(t,["children"]);if(this._canvas.set(e),!(null==r?void 0:r.length))return this._canvas;var o=r.map((function(t){return n._parseShape(t)})).filter((function(t){return!!t}));return this._canvas.setChildren(o)},n.prototype._parseShape=function(t){var n=this,r=t.tagName,e=t.children,o=In(t,["tagName","children"]),i=kn[r];if(!i)return console.warn("The specified tagName - ".concat(r," does not have a class definition."));var a=new i(o);if(null==e?void 0:e.length){var s=e.map((function(t){return n._parseShape(t)})).filter((function(t){return!!t}));a.add(s)}return a},n}(zn),Ln=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),qn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Ln(n,t),n.prototype.load=function(t){throw new Error("Method not implemented.")},n.prototype._parseShape=function(t){throw new Error("Method not implemented.")},n}(zn),Wn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Xn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Wn(n,t),n.prototype.load=function(t){var n=this;if(!t)return this._canvas;var r=(new DOMParser).parseFromString(t,"image/svg+xml").querySelector("svg");if(!r)return console.warn("No <svg> element found in the provided content."),this._canvas;this._canvas.set(this._getAttributes(r));var e=this._getChildren(r);if(!e.length)return this._canvas;var o=e.map((function(t){return n._parseShape(t)})).filter((function(t){return!!t}));return this._canvas.setChildren(o)},n.prototype._parseShape=function(t){var n=this,r=t.tagName.toLowerCase(),e=this._getAttributes(t),o=kn[r];if(!o)return console.warn("The specified tagName - ".concat(r," does not have a class definition."));var i=new o(e),a=this._getChildren(t);if(null==a?void 0:a.length){var s=a.map((function(t){return n._parseShape(t)})).filter((function(t){return!!t}));i.add(s)}return i},n.prototype._getAttributes=function(t){var n,r,e={};for(n=0;n<t.attributes.length;n++)e[(r=t.attributes[n]).name]=r.value;return e},n.prototype._getChildren=function(t){return Array.from(t.childNodes)},n}(zn),Yn=function(){return Yn=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},Yn.apply(this,arguments)},Hn=function(){function t(t,n){void 0===n&&(n={}),this._canvas=t,this._options=n,this._build()}return t.prototype.download=function(t){void 0===t&&(t="grafik");var n=document.createElement("a");n.href=this.getHref(),n.download=t+"."+this._extension,document.body.appendChild(n),n.click(),document.body.removeChild(n)},t.prototype.getContent=function(){return this._content},t.prototype.getHref=function(){return"data:"+this._mimeType+";charset=utf-8,"+encodeURIComponent(this._content)},t.prototype.getOption=function(t){return this._options[t]},t.prototype._getCanvasAttributes=function(){var t=this._canvas.zoom,n=this._canvas.pan;this._canvas.zoomTo(1,new T);var r=this._canvas.getAttributes();this._canvas.zoomTo(t,n);var e={};if(this._canvas.hasDrawingArea){var o=this._canvas.getDrawingAreaSize();e.width=o.x,e.height=o.y,e.viewBox="0 0 ".concat(o.x," ").concat(o.y)}return Yn(Yn({},r),e)},t.prototype._build=function(){this._content=this._createCanvas()},t}(),Gn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Rn=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n._mimeType="image/svg+xml",n._extension="svg",n}return Gn(n,t),n.prototype._createCanvas=function(){var t=this,n=this._canvas,r=this._serializeAttributes(this._getCanvasAttributes()),e=this._createDefs(),o=n.mapChildren((function(n){return t._createShape(n)})).join("");return"\n\t\t\t<svg ".concat(r,">\n\t\t\t\t").concat(e,"\n\t\t\t\t").concat(o,"\n\t\t\t</svg>\n\t\t")},n.prototype._serializeAttributes=function(t){var n=[];for(var r in t)n.push("".concat(r,'="').concat(t[r],'"'));return n.join(" ")},n}(Hn),Jn=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Kn={left:{fn:"translateX",defValue:0,unit:"px"},top:{fn:"translateY",defValue:0,unit:"px"},scaleX:{fn:"scaleX",defValue:1,unit:""},scaleY:{fn:"scaleY",defValue:1,unit:""},angle:{fn:"rotate",defValue:0,unit:"deg"}},Qn=Object.keys(Kn),Zn=["top","left","angle","scaleY","scaleX"],Un={linear:"linear",quadraticIn:"cubic-bezier(0.11, 0, 0.5, 0)",quadraticOut:"cubic-bezier(0.5, 1, 0.89, 1)",quadraticInOut:"cubic-bezier(0.45, 0, 0.55, 1)",quadraticOutIn:"cubic-bezier(0, 0.45, 1, 0.55)",cubicIn:"cubic-bezier(0.32, 0, 0.67, 0)",cubicOut:"cubic-bezier(0.33, 1, 0.68, 1)",cubicInOut:"cubic-bezier(0.65, 0, 0.35, 1)",cubicOutIn:"cubic-bezier(0, 0.65, 1, 0.35)",quarticIn:"cubic-bezier(0.5, 0, 0.75, 0)",quarticOut:"cubic-bezier(0.25, 1, 0.5, 1)",quarticInOut:"cubic-bezier(0.76, 0, 0.24, 1)",quarticOutIn:"cubic-bezier(0, 0.76, 1, 0.24)",quinticIn:"cubic-bezier(0.64, 0, 0.78, 0)",quinticOut:"cubic-bezier(0.22, 1, 0.36, 1)",quinticInOut:"cubic-bezier(0.83, 0, 0.17, 1)",quinticOutIn:"cubic-bezier(0, 0.83, 1, 0.17)",sineIn:"cubic-bezier(0.12, 0, 0.39, 0)",sineOut:"cubic-bezier(0.61, 1, 0.88, 1)",sineInOut:"cubic-bezier(0.37, 0, 0.63, 1)",sineOutIn:"cubic-bezier(0, 0.37, 1, 0.63)",exponentialIn:"cubic-bezier(0.7, 0, 0.84, 0)",exponentialOut:"cubic-bezier(0.16, 1, 0.3, 1)",exponentialInOut:"cubic-bezier(0.87, 0, 0.13, 1)",exponentialOutIn:"cubic-bezier(0, 0.87, 1, 0.13)",circularIn:"cubic-bezier(0.55, 0, 1, 0.45)",circularOut:"cubic-bezier(0, 0.55, 0.45, 1)",circularInOut:"cubic-bezier(0.85, 0, 0.15, 1)",circularOutIn:"cubic-bezier(0, 0.85, 1, 0.15)",backIn:"",backOut:"",backInOut:"",backOutIn:"",bounceIn:"",bounceOut:"",bounceInOut:"",bounceOutIn:"",elasticIn:"",elasticOut:"",elasticInOut:"",elasticOutIn:""},$n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Jn(n,t),n.prototype._createDefs=function(){var t=this,n=this._canvas.getAnimation().mapChildren((function(n){return t._createAnimation(n)})).join("");return"\n\t\t<style>\n\t\t\t".concat(n,"\n\t\t</style>\n\t\t")},n.prototype._createShape=function(t){var n=this,r=this._serializeAttributes(t.getWrapperAttributes()),e=this._serializeAttributes(t.getAttributes(!0)),o=this._getAnimatedTransformProps(t),i=t.get("tagName"),a=t.get("id");if(t.isCollection&&t.childrenLength){var s=t.mapChildren((function(t){return n._createShape(t)}));return o.length?this._createGroupsForTransform(o,t.id,'<g id="'.concat(a,'"><g ').concat(e,">").concat(s,"</g></g>")):"<g ".concat(r,"><g ").concat(e,">").concat(s,"</g></g>")}return o.length?this._createGroupsForTransform(o,t.id,'<g id="'.concat(a,'"><').concat(i," ").concat(e," /></g>")):"<g ".concat(r,"><").concat(i," ").concat(e," /></g>")},n.prototype._createGroupsForTransform=function(t,n,r){for(var e="",o="",i="",a=t.length-1;a>=0;a--)o="".concat(n,"-").concat(t[a]),i=a===t.length-1?r:e,e='<g id="'.concat(o,'">').concat(i,"</g>");return e},n.prototype._createAnimation=function(t){var n=this,r=t.shape,e=r.get("id"),o=r.get("tagName"),i=this.getOption("duration")||t.duration,a=this.getOption("delay")||"0",s=this.getOption("repeat")||"1",c=this.getOption("direction")||"normal",u=this.getOption("fillMode")||"both",p=t.mapChildren((function(t){return t.property})).filter((function(t){return!Qn.includes(t)})).map((function(t){return"".concat(e,"-").concat(t)})).join(", "),h=this._createKeyframes(t),l=this._getAnimatedTransformProps(r).map((function(t){return"\n\t\t\t#".concat(e,"-").concat(t," {\n\t\t\t\tanimation-name: ").concat(e,"-").concat(t,";\n\t\t\t\tanimation-duration: ").concat(i,"ms;\n\t\t\t\tanimation-delay: ").concat(a,"ms;\n\t\t\t\tanimation-iteration-count: ").concat(s,";\n\t\t\t\tanimation-direction: ").concat(c,";\n\t\t\t\tanimation-fill-mode: ").concat(u,";\n\t\t\t\ttransform: ").concat(n._getTransformValue(t,r.get(t)),"\n\t\t\t}\n\t\t\t")})).join("");return"\n\t\t\t#".concat(e," ").concat(o," {\n\t\t\t\tanimation-name: ").concat(p,";\n\t\t\t\tanimation-duration: ").concat(i,"ms;\n\t\t\t\tanimation-delay: ").concat(a,"ms;\n\t\t\t\tanimation-iteration-count: ").concat(s,";\n\t\t\t\tanimation-direction: ").concat(c,";\n\t\t\t\tanimation-fill-mode: ").concat(u,";\n\t\t\t}\n\t\t\t").concat(l,"\n\t\t\t").concat(h,"\n\t\t")},n.prototype._createKeyframes=function(t){var n=this,r=t.duration,e=t.shape.id;return t.mapChildren((function(t){var o=t.property,i=t.originalValue,a="@keyframes ".concat(e,"-").concat(o," {"),s="";return a+="\n\t\t\t\t\t0% {\n\t\t\t\t\t\t".concat(n._getCSSDeclaration(o,i),"\n\t\t\t\t\t}\n\t\t\t\t"),a+=t.mapChildren((function(t){var e=t.toJSON(),i=e.to,a=e.value,u=e.easing,p=c(i/r*100),h=Un[u]||"linear";return s=n._getCSSDeclaration(o,a),"\n\t\t\t\t\t\t\t".concat(p,"% {\n\t\t\t\t\t\t\t\t").concat(s,"\n\t\t\t\t\t\t\t\tanimation-timing-function: ").concat(h,";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t")})).join(""),(a+="\n\t\t\t\t\t100% {\n\t\t\t\t\t\t".concat(s,"\n\t\t\t\t\t}\n\t\t\t\t"))+"}"})).join("")},n.prototype._getAnimatedTransformProps=function(t){return t.getAnimation().mapChildren((function(t){return t.property})).filter((function(t){return Qn.includes(t)})).sort((function(t,n){return Zn.indexOf(t)-Zn.indexOf(n)}))},n.prototype._getCSSDeclaration=function(t,n){var r=this._getTransformValue(t,n);if(r)return"transform: ".concat(r,";");var e="number"==typeof n?"px":"";return"".concat(f(t),": ").concat(n).concat(e,";")},n.prototype._getTransformValue=function(t,n){if(!Kn[t])return"";var r=Kn[t],e=r.fn,o=r.defValue,i=r.unit,a=void 0===n?o:n;return"".concat(e,"(").concat(a).concat(i,")")},n}(Rn),tr=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),nr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return tr(n,t),n.prototype._createDefs=function(){return""},n.prototype._createShape=function(t){var n=this,r=this._serializeAttributes(t.getWrapperAttributes()),e=this._serializeAttributes(t.getAttributes(!0)),o=t.get("tagName");if(t.isCollection&&t.childrenLength){var i=t.mapChildren((function(t){return n._createShape(t)}));return"<g ".concat(r,"><g ").concat(e,">").concat(i,"</g></g>")}return"<g ".concat(r,"><").concat(o," ").concat(e," /></g>")},n.prototype._createAnimation=function(){},n}(Rn),rr=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),er=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n._mimeType="application/json",n._extension="json",n}return rr(n,t),n.prototype._createDefs=function(){},n.prototype._createCanvas=function(){throw new Error("Method not implemented.")},n.prototype._createShape=function(){throw new Error("Method not implemented.")},n.prototype._createAnimation=function(){throw new Error("Method not implemented.")},n}(Hn),or=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),ir=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n._mimeType="text/plain",n._extension="tsx",n}return or(n,t),n.prototype._createDefs=function(){},n.prototype._createCanvas=function(){throw new Error("Method not implemented.")},n.prototype._createShape=function(t){throw new Error("Method not implemented.")},n.prototype._createAnimation=function(t){throw new Error("Method not implemented.")},n}(Hn),ar=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),sr=["xmlns","viewBox","className","transform","preserveAspectRatio"],cr={svg:"Canvas",g:"Group",rect:"Rect",circle:"Circle",ellipse:"Ellipse",path:"Path",polygon:"Polygon",polyline:"Polyline",image:"Image",text:"Text","text-path":"TextPath"},ur=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n._mimeType="text/plain",n._extension="vue",n}return ar(n,t),n.prototype._createCanvas=function(){var t=this,n=this._serializeAttributes(this._getCanvasAttributes()),r=this._canvas.mapChildren((function(n){return t._createShape(n)})).join("");return"\n\t\t\t<script setup>\n\t\t\t\t".concat(this._createDefs(),"\n\t\t\t<\/script>\n\t\t\t<template>\n\t\t\t\t<Canvas ").concat(n,">\n\t\t\t\t\t").concat(r,"\n\t\t\t\t</Canvas>\n\t\t\t</template>\n\t\t")},n.prototype._createDefs=function(){var t=this,n=this._getComponents(),r=this._canvas.getAnimation().mapChildren((function(n){return t._createAnimation(n)})).join("");return"\n\t\t\timport { Canvas, ".concat(n," } from '@grafikjs/vue';\n\t\t\t").concat(r,"\n\t\t")},n.prototype._createShape=function(t){var n=this,r=t.get("tagName"),e=this._serializeAttributes(this._getTransformAttrs(t)),o=this._serializeAttributes(this._getAnimationAttr(t)),i=this._serializeAttributes(t.getAttributes(!0)),a=cr[r];if(!a)return"";if(t.isCollection&&t.childrenLength){var s=t.mapChildren((function(t){return n._createShape(t)})).join("");return"\n\t\t\t\t<".concat(a," ").concat(e," ").concat(i," ").concat(o,">\n\t\t\t\t\t").concat(s,"\n\t\t\t\t</").concat(a,">\n\t\t\t")}return"\n\t\t\t<".concat(a," ").concat(e," ").concat(i," />\n\t\t")},n.prototype._createAnimation=function(t){if(!t.childrenLength)return"";var n=t.shape,r=JSON.stringify(t.toJSON()),e=this._createAnimationVarName(n);return"\n\t\t\tconst ".concat(e," = ").concat(r,";\n\t\t")},n.prototype._createAnimationVarName=function(t){return"anim_"+t.id.replace(t.tagName+"-","")},n.prototype._serializeAttributes=function(t){var n,r,e=[];for(n in t)sr.includes(n)||(r="string"==typeof t[n]?n:":"+n,e.push("".concat(r,'="').concat(t[n],'"')));return e.join(" ")},n.prototype._getTransformAttrs=function(t){return{left:0,top:0}},n.prototype._getAnimationAttr=function(t){return t.getAnimation().childrenLength?{animation:this._createAnimationVarName(t)}:{}},n.prototype._getComponents=function(){var t=this,n=[];return this._canvas.eachChild((function(r){return t.__getComponent(r,n)})),n.join(", ")},n.prototype.__getComponent=function(t,n){var r=this,e=cr[t.tagName];e&&!n.includes(e)&&n.push(e),t.isCollection&&t.eachChild((function(t){return r.__getComponent(t,n)}))},n}(Hn),pr=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},t(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),hr=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n._buffers=[],n}return pr(n,t),n.prototype._createDefs=function(){},n.prototype._createCanvas=function(){throw new Error("Method not implemented.")},n.prototype._createShape=function(){throw new Error("Method not implemented.")},n.prototype._createAnimation=function(){throw new Error("Method not implemented.")},n.prototype.getBuffers=function(){return this._buffers},n}(Hn);return n})()));